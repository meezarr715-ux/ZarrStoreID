<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZarrStoreID | Konter Digital</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@800;900&display=swap">
    <style>
        :root {
            --primary: #6a11cb;
            --secondary: #2575fc;
            --accent: #ff4da6;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --shadow: rgba(106, 17, 203, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 5%;
            box-shadow: 0 4px 12px var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid white;
            background: white;
            padding: 5px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .logo-img:hover {
            transform: rotate(5deg);
        }

        .logo h1 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 900;
            font-size: 1.8rem;
            letter-spacing: 1px;
        }

        .logo span {
            color: var(--accent);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            font-size: 1.1rem;
            padding: 8px 12px;
            border-radius: 30px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        nav a:hover, nav a.active {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        main {
            flex: 1;
            max-width: 1400px;
            width: 100%;
            margin: 2rem auto;
            padding: 0 5%;
        }

        section {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            margin-bottom: 2.5rem;
            box-shadow: 0 10px 30px var(--shadow);
            display: none;
            animation: fadeIn 0.5s ease;
        }

        section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ANIMASI UNTUK CLOUDFLARE VERIFICATION */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        @keyframes progressShimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        @keyframes checkmark {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .section-title {
            font-family: 'Montserrat', sans-serif;
            color: var(--primary);
            margin-bottom: 1.5rem;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--secondary);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 15px;
        }

        /* ==================== BANNER WELCOME DENGAN TEKS & BORDER BAYANGAN ==================== */
        .welcome-banner {
            width: 100%;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 2rem;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            position: relative;
            height: auto;
            max-height: 450px;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            aspect-ratio: 21/9;
        }

        .welcome-banner-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
            position: absolute;
            top: 0;
            left: 0;
        }

        .welcome-banner:hover .welcome-banner-img {
            transform: scale(1.03);
        }

        .welcome-banner-content {
            position: relative;
            z-index: 2;
            color: white;
            padding: 2rem 3rem;
            text-align: center;
            width: 90%;
            max-width: 800px;
            margin: 2rem;
        }

        .welcome-banner-content h2 {
            font-size: clamp(2rem, 5vw, 4rem);
            margin-bottom: 0.5rem;
            font-family: 'Montserrat', sans-serif;
            text-shadow: 
                0 2px 4px rgba(0,0,0,0.8),
                0 4px 8px rgba(0,0,0,0.6),
                0 8px 16px rgba(0,0,0,0.4);
            font-weight: 900;
            letter-spacing: 1px;
            line-height: 1.1;
        }

        .welcome-banner-content p {
            font-size: clamp(1.2rem, 2.5vw, 1.8rem);
            opacity: 0.95;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.5;
            text-shadow: 
                0 1px 2px rgba(0,0,0,0.8),
                0 2px 4px rgba(0,0,0,0.6);
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        /* Tambahkan overlay gradient untuk keterbacaan yang lebih baik */
        .welcome-banner::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                135deg,
                rgba(0, 0, 0, 0.3) 0%,
                rgba(0, 0, 0, 0.1) 100%
            );
            z-index: 1;
        }

        /* ==================== STATUS TOKO DI POJOK KANAN ATAS ==================== */
        .store-hours-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 50px;
            padding: 8px 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            max-width: 300px;
        }

        .store-hours-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            background: rgba(255, 255, 255, 0.95);
        }

        .store-status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .store-status-dot.open {
            background: var(--success);
            box-shadow: 0 0 10px var(--success);
            animation: pulse 2s infinite;
        }

        .store-status-dot.closed {
            background: var(--danger);
            box-shadow: 0 0 10px var(--danger);
        }

        .store-hours-text {
            display: flex;
            flex-direction: column;
            gap: 2px;
            flex: 1;
            min-width: 0;
        }

        .store-status {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--dark);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .store-status.open {
            color: var(--success);
        }

        .store-status.closed {
            color: var(--danger);
        }

        .store-hours {
            font-size: 0.75rem;
            color: var(--gray);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .store-hours-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            flex-shrink: 0;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .store-hours-icon:hover {
            transform: scale(1.1);
        }

        /* Modal untuk detail jam operasional */
        .store-hours-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .store-hours-modal-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .store-hours-modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--gray);
            cursor: pointer;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }

        .store-hours-modal-close:hover {
            background: #f8f9fa;
        }

        .store-hours-modal-title {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
            text-align: center;
            font-weight: 700;
        }

        .store-hours-list {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .store-hours-item {
            display: flex;
            justify-content: space-between;
            padding: 0.8rem;
            border-radius: 10px;
            background: #f8f9ff;
            transition: background 0.3s;
        }

        .store-hours-item:hover {
            background: #f0f4ff;
        }

        .store-hours-item.today {
            background: linear-gradient(135deg, rgba(106, 17, 203, 0.1), rgba(37, 117, 252, 0.1));
            border-left: 4px solid var(--primary);
        }

        .store-hours-day {
            font-weight: 600;
            color: var(--dark);
        }

        .store-hours-time {
            color: var(--secondary);
            font-weight: 600;
        }

        .store-hours-note {
            margin-top: 1.5rem;
            padding: 1rem;
            background: #fff3cd;
            border-radius: 10px;
            border-left: 4px solid var(--warning);
            font-size: 0.9rem;
            color: #856404;
        }

        .store-hours-current {
            margin-top: 1rem;
            padding: 1rem;
            background: linear-gradient(135deg, #f8f9ff, #f0f4ff);
            border-radius: 10px;
            text-align: center;
            border: 2px dashed var(--primary);
        }

        .store-hours-current-time {
            font-size: 1.1rem;
            color: var(--primary);
            font-weight: 700;
            margin: 0.5rem 0;
        }

        .welcome-section {
            flex: 2;
            min-width: 300px;
        }

        .welcome-card {
            background: linear-gradient(135deg, #f8f9ff 0%, #f0f4ff 100%);
            padding: 2.5rem;
            border-radius: 20px;
            border-left: 6px solid var(--secondary);
        }

        .welcome-card h2 {
            font-size: 2.5rem;
            color: var(--dark);
            margin-bottom: 1.5rem;
        }

        .welcome-card h2 span {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .guide-steps {
            margin-top: 2rem;
        }

        .step {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 1.5rem;
            padding: 1.2rem;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }

        .step:hover {
            transform: translateX(10px);
        }

        .step-number {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        /* ==================== FOLDER SYSTEM STYLES ==================== */
        .folder-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .folder-card {
            background: white;
            border-radius: 18px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            transition: all 0.4s ease;
            border: 2px solid #f0f0f0;
            cursor: pointer;
            position: relative;
        }

        .folder-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 35px var(--shadow);
            border-color: var(--secondary);
        }

        .folder-header {
            padding: 1.5rem 1.5rem 1rem;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .folder-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            flex-shrink: 0;
        }

        .folder-info {
            flex: 1;
        }

        .folder-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .folder-desc {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .folder-content {
            padding: 1rem 1.5rem;
        }

        .subfolder-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 10px;
            background: #f8f9ff;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid #eef2ff;
        }

        .subfolder-item:hover {
            background: #f0f4ff;
            transform: translateX(5px);
            border-color: #d1e3ff;
        }

        .subfolder-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            background: white;
            color: var(--dark);
            flex-shrink: 0;
        }

        .subfolder-info {
            flex: 1;
        }

        .subfolder-name {
            font-weight: 600;
            color: var(--dark);
            font-size: 1rem;
        }

        .subfolder-count {
            font-size: 0.85rem;
            color: var(--gray);
        }

        .folder-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #fafbff;
        }

        .product-count {
            font-size: 0.9rem;
            color: var(--gray);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .folder-action {
            padding: 8px 20px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .folder-action:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(106, 17, 203, 0.2);
        }

        /* Subfolder Products View */
        .subfolder-products-container {
            margin-top: 2rem;
            animation: fadeIn 0.5s ease;
        }

        .subfolder-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f0f4ff;
        }

        .back-to-folders {
            background: none;
            border: none;
            color: var(--primary);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .back-to-folders:hover {
            background: #f0f4ff;
        }

        .current-folder-info {
            flex: 1;
        }

        .current-folder-title {
            font-size: 1.8rem;
            color: var(--dark);
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .current-folder-desc {
            color: var(--gray);
            font-size: 1rem;
        }

        /* Breadcrumb Navigation */
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 1.5rem;
            padding: 10px 15px;
            background: #f8f9ff;
            border-radius: 10px;
            font-size: 0.95rem;
            flex-wrap: wrap;
        }

        .breadcrumb-item {
            color: var(--gray);
            cursor: pointer;
            transition: color 0.3s;
        }

        .breadcrumb-item:hover {
            color: var(--primary);
        }

        .breadcrumb-separator {
            color: var(--gray);
        }

        .breadcrumb-current {
            color: var(--primary);
            font-weight: 600;
        }

        /* Subfolder Product Grid */
        .subfolder-product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .subfolder-product-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            border: 1px solid #f0f0f0;
            position: relative;
        }

        .subfolder-product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px var(--shadow);
            border-color: var(--secondary);
        }

        .subfolder-product-content {
            padding: 1.5rem;
        }

        .subfolder-product-badge {
            display: inline-block;
            background: rgba(106, 17, 203, 0.1);
            color: var(--primary);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-bottom: 10px;
        }

        .subfolder-product-name {
            font-size: 1.2rem;
            color: var(--dark);
            margin-bottom: 10px;
            min-height: 40px;
        }

        .subfolder-product-price {
            color: var(--secondary);
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .subfolder-product-desc {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 1rem;
            min-height: 40px;
        }

        .subfolder-product-actions {
            display: flex;
            gap: 10px;
            margin-top: auto;
        }

        /* TOMBOL HAPUS DIHAPUS DARI SINI */

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem 2rem;
            color: var(--gray);
            width: 100%;
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-state-title {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .empty-state-desc {
            max-width: 500px;
            margin: 0 auto 2rem;
        }

        /* ==================== PRODUCT STYLES ==================== */
        .sync-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid #f0f4ff;
        }

        .sync-btn {
            padding: 10px 25px;
            background: linear-gradient(to right, var(--accent), #ff0066);
            color: white;
            border: none;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(255, 77, 166, 0.2);
        }

        .sync-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 77, 166, 0.3);
        }

        .sync-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .product-card {
            background: white;
            border-radius: 18px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            transition: all 0.4s ease;
            border: 1px solid #f0f0f0;
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px var(--shadow);
        }

        .product-img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 1px solid #f0f0f0;
            transition: transform 0.5s ease;
        }

        .product-card:hover .product-img {
            transform: scale(1.05);
        }

        .product-content {
            padding: 1.5rem;
        }

        .product-category {
            display: inline-block;
            background: rgba(106, 17, 203, 0.1);
            color: var(--primary);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            margin-bottom: 10px;
        }

        .product-title {
            font-size: 1.3rem;
            color: var(--dark);
            margin-bottom: 10px;
            min-height: 40px;
        }

        .product-price {
            color: var(--secondary);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .product-desc {
            color: var(--gray);
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
            min-height: 40px;
        }

        .product-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 12px 25px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-detail {
            flex: 2;
            background: #f0f4ff;
            color: var(--secondary);
        }

        .btn-buy {
            flex: 1;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(0, 0, 0, 0.1);
        }

        .payment-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2.5rem;
        }

        .order-summary {
            background: #f8f9ff;
            padding: 2rem;
            border-radius: 20px;
            border: 2px dashed #cce7ff;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            padding: 1rem 0;
            border-bottom: 1px solid #eaeaea;
        }

        .order-total {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin-top: 1.5rem;
            text-align: right;
        }

        .payment-methods {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .payment-option {
            background: white;
            border: 2px solid #eaeaea;
            border-radius: 15px;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-option:hover, .payment-option.selected {
            border-color: var(--secondary);
            background: #f0f7ff;
        }

        .payment-icon {
            font-size: 2.5rem;
            width: 70px;
            height: 70px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .dana { background: #008BFF; }
        .gopay { background: #00AA13; }
        .ovo { background: #4C2A86; }
        .qris { background: #FF6B00; }

        .payment-info h4 {
            margin-bottom: 8px;
            color: var(--dark);
        }

        .payment-info p {
            color: var(--gray);
            font-size: 0.95rem;
        }

        .payment-number {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
            font-family: monospace;
            font-size: 1.1rem;
            text-align: center;
            cursor: pointer;
            position: relative;
        }

        .payment-number:hover {
            background: #e9ecef;
        }

        .copy-notification {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--primary);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .copy-notification.show {
            opacity: 1;
        }

        .qr-container {
            text-align: center;
            padding: 1rem;
            background: white;
            border-radius: 15px;
            margin-top: 1rem;
            border: 2px dashed #e0e0e0;
        }

        .qr-image {
            width: 200px;
            height: 200px;
            object-fit: contain;
            margin: 0 auto 1rem;
            display: block;
            border-radius: 10px;
            border: 1px solid #eee;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--gray);
            cursor: pointer;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--secondary);
        }

        /* CAPTCHA Styles */
        .captcha-container {
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: #f8f9fa;
            border-radius: 15px;
            border: 2px dashed #dee2e6;
        }

        .captcha-box {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 1rem;
        }

        .captcha-text {
            font-family: 'Courier New', monospace;
            font-size: 1.8rem;
            font-weight: bold;
            letter-spacing: 5px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            padding: 10px 20px;
            border-radius: 10px;
            background-color: #f8f9ff;
            border: 2px solid var(--secondary);
            user-select: none;
            text-align: center;
            flex: 1;
        }

        .captcha-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .captcha-controls button {
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            background: var(--secondary);
            color: white;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
        }

        .captcha-controls button:hover {
            background: var(--primary);
            transform: translateY(-2px);
        }

        .captcha-input {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .captcha-input input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-size: 1.1rem;
            letter-spacing: 2px;
            text-align: center;
            font-weight: bold;
        }

        .captcha-input input:focus {
            border-color: var(--primary);
            outline: none;
        }

        .captcha-status {
            margin-top: 10px;
            font-size: 0.9rem;
            text-align: center;
            min-height: 25px;
        }

        .captcha-status.success {
            color: var(--success);
        }

        .captcha-status.error {
            color: var(--danger);
        }

        .robot-verification {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 1.5rem 0;
            border: 2px solid #e9ecef;
        }

        .robot-checkbox {
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            user-select: none;
        }

        .robot-checkbox input[type="checkbox"] {
            display: none;
        }

        .robot-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--gray);
            border: 2px solid #dee2e6;
            transition: all 0.3s ease;
        }

        .robot-checkbox.checked .robot-icon {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .robot-text {
            font-weight: 500;
            color: var(--dark);
        }

        .btn-whatsapp {
            width: 100%;
            padding: 18px;
            font-size: 1.2rem;
            background: linear-gradient(to right, #25D366, #128C7E);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-top: 1.5rem;
            transition: all 0.3s ease;
        }

        .btn-whatsapp:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(37, 211, 102, 0.3);
        }

        .btn-whatsapp:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .history-container {
            overflow-x: auto;
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }

        .history-table th, .history-table td {
            padding: 1.2rem 1rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .history-table th {
            background: #f8f9ff;
            color: var(--primary);
            font-weight: 600;
        }

        .history-table tr:hover {
            background: #f9f9ff;
        }

        .status {
            padding: 8px 15px;
            border-radius: 30px;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .status-completed {
            background: #d4edda;
            color: #155724;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-processing {
            background: #d1ecf1;
            color: #0c5460;
        }

        .status-cancelled {
            background: #f8d7da;
            color: #721c24;
        }

        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 2px;
        }

        .action-btn.cancel {
            background: #f8d7da;
            color: #721c24;
        }

        .action-btn.cancel:hover {
            background: #f5c6cb;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .info-card {
            background: #f8f9ff;
            padding: 2rem;
            border-radius: 18px;
            border-left: 5px solid var(--secondary);
        }

        /* Kontak Kami dengan logo responsif */
        .contact-info div {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 1.2rem;
        }

        .contact-info i {
            width: 50px;
            height: 50px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            transition: transform 0.3s ease;
            flex-shrink: 0;
        }

        .contact-info i:hover {
            transform: scale(1.1);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .social-links a {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.3rem;
            text-decoration: none;
            transition: transform 0.3s ease;
            flex-shrink: 0;
        }

        .social-links a:hover {
            transform: translateY(-5px) scale(1.1);
        }

        .wa { background: #25D366; }
        .ig { background: #E4405F; }
        .tiktok { background: #000000; }

        .supporters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 1rem;
            justify-content: flex-start;
        }

        .supporter {
            background: white;
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 0.9rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            cursor: default;
            user-select: none;
            transition: all 0.3s ease;
            display: inline-block;
            margin: 5px;
            border: 1px solid #f0f0f0;
            color: #555;
            font-weight: 400;
        }

        .supporter:hover {
            background: #f8f9fa !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1) !important;
        }

        .floating-wa {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(to right, #25D366, #128C7E);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            box-shadow: 0 10px 25px rgba(37, 211, 102, 0.3);
            z-index: 100;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .floating-wa:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 30px rgba(37, 211, 102, 0.4);
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            color: white;
            font-weight: 500;
            z-index: 3000;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .notification.success {
            background: linear-gradient(to right, #00b09b, #96c93d);
        }

        .notification.error {
            background: linear-gradient(to right, #dc3545, #ff6b6b);
        }

        .notification.info {
            background: linear-gradient(to right, var(--primary), var(--secondary));
        }

        /* NEW: Badge for new products */
        .new-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(45deg, #ff4da6, #ff0066);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            z-index: 2;
            animation: pulse 2s infinite;
        }

        /* Kategori baru untuk produk spesial */
        .category-bot { background: rgba(255, 77, 166, 0.1); color: #ff4da6; }
        .category-editor { background: rgba(37, 117, 252, 0.1); color: #2575fc; }

        /* EDIT MODE STYLES */
        .edit-mode-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: #f8f9ff;
            border-radius: 15px;
            border: 2px solid var(--primary);
        }

        .edit-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .edit-btn.edit {
            background: linear-gradient(to right, var(--warning), #ff9500);
            color: white;
        }

        .edit-btn.add {
            background: linear-gradient(to right, var(--success), #28a745);
            color: white;
        }

        .edit-btn.delete {
            background: linear-gradient(to right, var(--danger), #dc3545);
            color: white;
        }

        .edit-btn.admin {
            background: linear-gradient(to right, #6a11cb, #2575fc);
            color: white;
        }

        .edit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .edit-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--warning);
            color: white;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 2;
            animation: pulse 2s infinite;
        }

        .delete-confirm-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .delete-confirm-content {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            max-width: 400px;
            width: 90%;
            text-align: center;
        }

        .delete-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 2rem;
        }

        .admin-login-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .admin-login-content {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            max-width: 400px;
            width: 90%;
        }

        /* TOMBOL EDIT DI SETIAP PRODUK */
        .product-edit-btns {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 2;
        }

        .subfolder-product-card:hover .product-edit-btns,
        .folder-card:hover .product-edit-btns {
            opacity: 1;
        }

        .edit-icon-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .edit-icon-btn.edit {
            background: var(--warning);
        }

        .edit-icon-btn.delete {
            background: var(--danger);
        }

        .edit-icon-btn:hover {
            transform: scale(1.1);
        }

        .folder-edit-btns {
            position: absolute;
            top: 10px;
            left: 10px;
            display: flex;
            gap: 5px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 2;
        }

        .folder-card:hover .folder-edit-btns {
            opacity: 1;
        }

        /* TOMBOL TAMBAH SUBFOLDER */
        .add-subfolder-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 10px;
            background: #f0f4ff;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px dashed var(--primary);
            color: var(--primary);
            justify-content: center;
        }

        .add-subfolder-btn:hover {
            background: #e6f7ff;
            transform: translateX(5px);
            border-color: var(--secondary);
        }

        footer {
            background: linear-gradient(to right, var(--dark), #343a40);
            color: white;
            padding: 2.5rem 5%;
            margin-top: 3rem;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 2rem;
        }

        .footer-section {
            flex: 1;
            min-width: 250px;
        }

        .footer-section h3 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--accent);
        }

        .copyright {
            text-align: center;
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
        }

        /* Responsive Folder System */
        @media (max-width: 992px) {
            .folder-container {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .subfolder-product-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .current-folder-title {
                font-size: 1.5rem;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .folder-container {
                grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            }
            
            .folder-header {
                padding: 1.2rem 1.2rem 0.8rem;
            }
            
            .folder-icon {
                width: 50px;
                height: 50px;
                font-size: 1.7rem;
            }
            
            .current-folder-title {
                font-size: 1.3rem;
            }
            
            .subfolder-product-grid {
                grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            }
            
            .sync-container {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
        }

        @media (max-width: 576px) {
            .folder-container {
                grid-template-columns: 1fr;
            }
            
            .subfolder-product-grid {
                grid-template-columns: 1fr;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .subfolder-product-actions {
                flex-direction: column;
            }
            
            .btn-detail, .btn-buy {
                width: 100%;
            }
        }

        /* Responsive Styles */
        @media (max-width: 1200px) {
            main {
                padding: 0 3%;
            }
        }

        @media (max-width: 992px) {
            .header-container {
                flex-direction: column;
                gap: 1.5rem;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .hero {
                flex-direction: column;
                text-align: center;
            }
            
            .contact-info div {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }
            
            .contact-info i {
                width: 40px;
                height: 40px;
                font-size: 1.1rem;
            }

            /* Store hours badge responsive */
            .store-hours-badge {
                top: 15px;
                right: 15px;
                max-width: 250px;
            }

            /* ==================== BANNER RESPONSIF TABLET ==================== */
            .welcome-banner {
                aspect-ratio: 16/9;
                max-height: 350px;
                border-radius: 15px;
            }
            
            .welcome-banner-content {
                padding: 1.5rem 2rem;
                margin: 1.5rem;
                width: 95%;
            }
            
            .welcome-banner-content h2 {
                font-size: clamp(1.8rem, 4vw, 3rem);
            }
            
            .welcome-banner-content p {
                font-size: clamp(1.1rem, 2vw, 1.5rem);
            }
        }

        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
                position: absolute;
                top: 1.5rem;
                right: 5%;
            }
            
            nav {
                display: none;
                width: 100%;
                margin-top: 1rem;
            }
            
            nav.active {
                display: block;
            }
            
            nav ul {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            section {
                padding: 1.5rem;
            }
            
            .floating-wa {
                bottom: 20px;
                right: 20px;
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
            }
            
            .qr-image {
                width: 150px;
                height: 150px;
            }
            
            .captcha-box {
                flex-direction: column;
            }
            
            .captcha-controls {
                flex-direction: row;
                justify-content: center;
            }
            
            .modal-content {
                padding: 1.5rem;
                width: 95%;
            }
            
            .supporters {
                justify-content: center;
            }
            
            .supporter {
                padding: 8px 16px;
                font-size: 0.85rem;
            }
            
            .contact-info div {
                align-items: flex-start;
                text-align: left;
            }
            
            .contact-info i {
                width: 35px;
                height: 35px;
                font-size: 1rem;
            }
            
            .social-links a {
                width: 45px;
                height: 45px;
                font-size: 1.2rem;
            }

            /* Store hours badge responsive */
            .store-hours-badge {
                top: 10px;
                right: 10px;
                max-width: 220px;
                padding: 6px 12px;
            }
            
            .store-status {
                font-size: 0.8rem;
            }
            
            .store-hours {
                font-size: 0.7rem;
            }
            
            .store-hours-icon {
                width: 20px;
                height: 20px;
                font-size: 0.7rem;
            }

            /* ==================== BANNER RESPONSIF HP ==================== */
            .welcome-banner {
                aspect-ratio: 4/3;
                max-height: 280px;
                border-radius: 12px;
                min-height: 180px;
            }
            
            .welcome-banner-content {
                padding: 1.2rem 1.5rem;
                margin: 1rem;
            }
            
            .welcome-banner-content h2 {
                font-size: clamp(1.6rem, 3.5vw, 2.5rem);
                margin-bottom: 0.3rem;
            }
            
            .welcome-banner-content p {
                font-size: clamp(1rem, 1.8vw, 1.3rem);
                line-height: 1.4;
            }
        }

        @media (max-width: 576px) {
            .logo h1 {
                font-size: 1.5rem;
            }
            
            .welcome-card h2 {
                font-size: 2rem;
            }
            
            .product-actions {
                flex-direction: column;
            }
            
            .payment-container {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                padding: 1rem;
            }
            
            .qr-image {
                width: 120px;
                height: 120px;
            }
            
            .captcha-text {
                font-size: 1.5rem;
                letter-spacing: 3px;
                padding: 8px 15px;
            }
            
            .footer-content {
                flex-direction: column;
            }
            
            .footer-section {
                text-align: center;
            }
            
            .contact-info div {
                flex-direction: row;
                align-items: center;
            }
            
            .contact-info i {
                width: 30px;
                height: 30px;
                font-size: 0.9rem;
            }
            
            .social-links {
                justify-content: center;
            }

            /* Store hours badge responsive */
            .store-hours-badge {
                top: 8px;
                right: 8px;
                max-width: 180px;
                padding: 5px 10px;
            }
            
            .store-status-dot {
                width: 10px;
                height: 10px;
            }
            
            .store-status {
                font-size: 0.75rem;
            }
            
            .store-hours {
                font-size: 0.65rem;
            }
            
            .store-hours-icon {
                width: 18px;
                height: 18px;
                font-size: 0.65rem;
            }

            /* ==================== BANNER RESPONSIF HP KECIL ==================== */
            .welcome-banner {
                aspect-ratio: 1/1;
                max-height: 250px;
                border-radius: 10px;
            }
            
            .welcome-banner-content {
                padding: 1rem;
                margin: 0.8rem;
            }
            
            .welcome-banner-content h2 {
                font-size: clamp(1.4rem, 3vw, 2rem);
            }
            
            .welcome-banner-content p {
                font-size: clamp(0.9rem, 1.5vw, 1.1rem);
            }
        }

        @media (max-width: 480px) {
            .section-title {
                font-size: 1.3rem;
            }
            
            .product-title {
                font-size: 1.1rem;
            }
            
            .product-price {
                font-size: 1.3rem;
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
            
            .captcha-input {
                flex-direction: column;
            }
            
            .captcha-input button {
                width: 100%;
            }
            
            .supporter {
                padding: 6px 12px;
                font-size: 0.8rem;
            }
            
            .history-table th, 
            .history-table td {
                padding: 0.8rem 0.5rem;
                font-size: 0.9rem;
            }
            
            .history-table {
                min-width: 600px;
            }
            
            .contact-info div {
                flex-direction: column;
                text-align: center;
                gap: 8px;
            }
            
            .contact-info i {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
            
            /* Store hours badge responsive */
            .store-hours-badge {
                max-width: 160px;
                padding: 4px 8px;
            }
            
            .store-hours-text {
                gap: 1px;
            }
            
            .store-status {
                font-size: 0.7rem;
            }
            
            .store-hours {
                font-size: 0.6rem;
            }
        }

        @media (max-width: 360px) {
            .logo h1 {
                font-size: 1.3rem;
            }
            
            .profile-img {
                width: 200px;
                height: 200px;
            }
            
            .step-number {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
            
            .step {
                padding: 1rem;
            }
            
            .supporter {
                padding: 5px 10px;
                font-size: 0.75rem;
            }
            
            .contact-info div {
                flex-direction: column;
            }
            
            .contact-info i {
                width: 35px;
                height: 35px;
            }
            
            .social-links a {
                width: 40px;
                height: 40px;
                font-size: 1.1rem;
            }
            
            /* Store hours badge responsive */
            .store-hours-badge {
                max-width: 140px;
            }
            
            .store-status {
                font-size: 0.65rem;
            }
            
            .store-hours {
                font-size: 0.55rem;
            }
            
            .store-hours-icon {
                width: 16px;
                height: 16px;
                font-size: 0.6rem;
            }
        }

        @media (min-width: 769px) and (max-width: 1024px) {
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
            
            .payment-container {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .contact-info div {
                flex-direction: row;
                align-items: center;
            }
        }

        @media (min-width: 1025px) and (max-width: 1440px) {
            main {
                padding: 0 4%;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            }
            
            .contact-info div {
                flex-direction: row;
                align-items: center;
            }

            /* ==================== BANNER DESKTOP BESAR ==================== */
            .welcome-banner {
                max-height: 500px;
                aspect-ratio: 21/9;
            }
            
            .welcome-banner-content {
                padding: 3rem 4rem;
            }
            
            .welcome-banner-content h2 {
                font-size: clamp(2.5rem, 6vw, 4.5rem);
            }
            
            .welcome-banner-content p {
                font-size: clamp(1.5rem, 3vw, 2rem);
            }
        }

        @media (min-width: 1441px) {
            main {
                max-width: 1600px;
            }
            
            .contact-info div {
                flex-direction: row;
                align-items: center;
                gap: 20px;
            }
            
            .contact-info i {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }

            .welcome-banner-content h2 {
                font-size: 5rem;
                text-shadow: 
                    0 3px 6px rgba(0,0,0,0.8),
                    0 6px 12px rgba(0,0,0,0.6),
                    0 12px 24px rgba(0,0,0,0.4);
            }

            .welcome-banner-content p {
                font-size: 2.2rem;
                text-shadow: 
                    0 2px 4px rgba(0,0,0,0.8),
                    0 4px 8px rgba(0,0,0,0.6);
            }
        }

        /* ==================== BANNER LANDSCAPE MODE ==================== */
        @media (max-height: 600px) and (orientation: landscape) {
            .welcome-banner {
                aspect-ratio: 21/9;
                max-height: 250px;
            }
            
            .welcome-banner-content {
                padding: 1rem 2rem;
                margin: 1rem;
            }
            
            .welcome-banner-content h2 {
                font-size: 2rem;
            }
            
            .welcome-banner-content p {
                font-size: 1.2rem;
            }
            
            /* Store hours badge landscape */
            .store-hours-badge {
                top: 10px;
                right: 10px;
                max-width: 200px;
            }
        }

        @media (hover: none) and (pointer: coarse) {
            .btn,
            .filter-btn,
            .payment-option,
            .supporter {
                padding: 12px 20px;
                min-height: 44px;
            }
            
            .contact-info i,
            .social-links a {
                min-width: 44px;
                min-height: 44px;
            }
            
            .mobile-menu-btn {
                padding: 12px;
                min-height: 44px;
                min-width: 44px;
            }
            
            .store-hours-badge {
                min-height: 44px;
            }
            
            .delete-product-btn {
                opacity: 1;
                min-width: 44px;
                min-height: 44px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <img src="https://files.catbox.moe/gua633.jpg" alt="ZarrStoreID Logo" class="logo-img" onerror="this.src='https://via.placeholder.com/150/6a11cb/FFFFFF?text=ZS'">
                <h1>Zarr<span>Store</span>ID</h1>
            </div>
            
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            
            <nav id="mainNav">
                <ul>
                    <li><a href="#" class="nav-link active" data-target="beranda"><i class="fas fa-home"></i> Beranda</a></li>
                    <li><a href="#" class="nav-link" data-target="produk"><i class="fas fa-gamepad"></i> Produk</a></li>
                    <li><a href="#" class="nav-link" data-target="payment"><i class="fas fa-credit-card"></i> Pembayaran</a></li>
                    <li><a href="#" class="nav-link" data-target="riwayat"><i class="fas fa-history"></i> Riwayat</a></li>
                    <li><a href="#" class="nav-link" data-target="informasi"><i class="fas fa-info-circle"></i> Informasi</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section id="beranda" class="active">
            <h2 class="section-title"><i class="fas fa-star"></i> Selamat Datang di ZarrStoreID</h2>
            
            <!-- BANNER WELCOME DENGAN TEKS & BORDER BAYANGAN SAJA -->
            <div class="welcome-banner" id="welcomeBanner">
                <img src="" alt="Welcome Banner" class="welcome-banner-img" id="welcomeBannerImg">
                <div class="welcome-banner-content">
                    <h2 id="bannerTitle">ZarrStoreID</h2>
                    <p id="bannerSubtitle">Agen Konter Digital Yang Aman & Terpercaya</p>
                </div>
                
                <!-- STATUS TOKO DI POJOK KANAN ATAS -->
                <div class="store-hours-badge" id="storeHoursBadge">
                    <div class="store-status-dot" id="storeStatusDot"></div>
                    <div class="store-hours-text">
                        <div class="store-status" id="storeStatusText">Loading...</div>
                        <div class="store-hours" id="storeHoursText">Jam Operasional</div>
                    </div>
                    <div class="store-hours-icon" id="storeHoursIcon">
                        <i class="fas fa-clock"></i>
                    </div>
                </div>
            </div>
            
            <div class="hero">
                <div class="welcome-section">
                    <div class="welcome-card">
                        <h2>Halo Gamers! <span>Selamat Datang</span></h2>
                        <p>ZarrStoreID adalah toko online terpercaya untuk top up semua game favorit dan isi pulsa/kuota semua operator di Indonesia, Serta juga menyediakan jasa Sewa Bot WhatsApp dan Aplikasi Premium. Proses cepat, aman, dan harga terjangkau!</p>
                        
                        <div class="guide-steps">
                            <h3 style="color: var(--primary); margin-bottom: 1.5rem;">Cara Order Melalui Web Ini:</h3>
                            
                            <div class="step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h4>Pilih Produk</h4>
                                    <p>Buka menu Produk dan pilih barang yang kamu butuhkan</p>
                                </div>
                            </div>
                            
                            <div class="step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h4>Isi Form Order</h4>
                                    <p>Klik tombol "Beli" dan isi data yang diperlukan</p>
                                </div>
                            </div>
                            
                            <div class="step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h4>Konfirmasi via WhatsApp</h4>
                                    <p>Pesan akan langsung terkirim ke WhatsApp kami untuk konfirmasi</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="produk">
            <div class="section-header">
                <h2 class="section-title"><i class="fas fa-shopping-bag"></i> Produk Top Up Game, Isi Pulsa/Kuota, Sewa Bot, & Aplikasi Premium</h2>
                <div style="display: flex; gap: 10px;">
                    <button class="sync-btn" id="syncProductsBtn">
                        <i class="fas fa-sync-alt"></i> Refresh Produk
                    </button>
                    <button class="sync-btn edit-btn admin" id="adminToggleBtn" style="background: linear-gradient(to right, #6a11cb, #2575fc);">
                        <i class="fas fa-user-shield"></i> Admin Mode
                    </button>
                </div>
            </div>
            
            <!-- Controls for Edit Mode -->
            <div class="edit-mode-controls" id="editModeControls" style="display: none;">
                <div style="flex: 1;">
                    <strong style="color: var(--primary);">EDIT MODE AKTIF</strong>
                    <p style="font-size: 0.9rem; color: var(--gray); margin-top: 5px;">Klik tombol di bawah untuk mengelola produk</p>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="edit-btn add" onclick="openAddFolderModal()">
                        <i class="fas fa-folder-plus"></i> Folder Baru
                    </button>
                    <button class="edit-btn edit" onclick="toggleEditMode()">
                        <i class="fas fa-edit"></i> Edit Mode: ON
                    </button>
                </div>
            </div>
            
            <!-- Container untuk sistem folder -->
            <div class="products-container">
                <!-- Folder View -->
                <div class="folder-container" id="folderView"></div>
                
                <!-- Subfolder Products View -->
                <div class="subfolder-products-container" id="subfolderView" style="display: none;">
                    <div class="subfolder-header">
                        <button class="back-to-folders" id="backToFolders">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <div class="current-folder-info">
                            <h2 class="current-folder-title" id="currentFolderTitle">
                                <span id="folderIcon"></span>
                                <span id="folderTitle">Folder</span>
                            </h2>
                            <p class="current-folder-desc" id="currentFolderDesc">Deskripsi folder</p>
                        </div>
                        <button class="sync-btn edit-btn add" id="addProductBtn" style="display: none;" onclick="openAddProductModal()">
                            <i class="fas fa-plus"></i> Tambah Produk
                        </button>
                    </div>
                    
                    <div class="breadcrumb" id="breadcrumb">
                        <span class="breadcrumb-item" data-action="show-all">Semua Folder</span>
                        <span class="breadcrumb-separator"></span>
                        <span class="breadcrumb-current" id="currentBreadcrumb">Subfolder</span>
                    </div>
                    
                    <div class="subfolder-product-grid" id="subfolderProductGrid"></div>
                </div>
                
                <!-- All Products Grid View (backup) -->
                <div class="products-grid" id="allProductsView" style="display: none;"></div>
            </div>
        </section>

        <section id="payment">
            <h2 class="section-title"><i class="fas fa-credit-card"></i> Pembayaran</h2>
            
            <div class="payment-container">
                <div class="order-summary">
                    <h3 style="color: var(--primary); margin-bottom: 1.5rem;">Ringkasan Pesanan</h3>
                    <div class="order-item">
                        <span id="productName">Mobile Legends 86 Diamond</span>
                        <span id="productPrice">Rp 25,000</span>
                    </div>
                    <div class="order-item">
                        <span>Biaya Admin</span>
                        <span>(tergantung jenis produk)</span>
                    </div>
                    <div class="order-item">
                        <strong>Total</strong>
                        <strong class="order-total" id="totalPrice">Rp 25,000</strong>
                    </div>
                    
                    <div style="margin-top: 2rem;">
                        <h4 style="color: var(--dark); margin-bottom: 1rem;">Informasi Pengiriman:</h4>
                        <p>Setelah konfirmasi via WhatsApp dan pembayaran selesai, produk akan dikirim OTOMATIS ke ID game/nomor HP yang Anda berikan dalam waktu 1-5 menit.</p>
                        <p style="margin-top: 10px; color: var(--success);"><i class="fas fa-check-circle"></i> <strong>Sistem pengiriman otomatis 24/7</strong></p>
                    </div>
                </div>
                
                <div class="payment-methods">
                    <h3 style="color: var(--primary); margin-bottom: 1.5rem;">Pilih Metode Pembayaran</h3>
                    
                    <div class="payment-option" data-method="dana">
                        <div class="payment-icon dana">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <div class="payment-info">
                            <h4>DANA</h4>
                            <p>Transfer via DANA</p>
                            <div class="payment-number" data-number="088295039238">
                                088295039238
                                <div class="copy-notification">Copied!</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="payment-option" data-method="gopay">
                        <div class="payment-icon gopay">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="payment-info">
                            <h4>GOPAY</h4>
                            <p>Transfer via GoPay</p>
                            <div class="payment-number" data-number="088295039238">
                                088295039238
                                <div class="copy-notification">Copied!</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="payment-option" data-method="ovo">
                        <div class="payment-icon ovo">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <div class="payment-info">
                            <h4>OVO</h4>
                            <p>Transfer via OVO</p>
                            <div class="payment-number" data-number="088295039238">
                                088295039238
                                <div class="copy-notification">Copied!</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="payment-option" data-method="qris">
                        <div class="payment-icon qris">
                            <i class="fas fa-qrcode"></i>
                        </div>
                        <div class="payment-info">
                            <h4>QRIS</h4>
                            <p>Scan QR Code untuk pembayaran</p>
                            <div class="qr-container" id="qrisContainer">
                                <p>QR Code Coming Soon</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="riwayat">
            <h2 class="section-title"><i class="fas fa-history"></i> Riwayat Transaksi</h2>
            
            <div class="history-container">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>ID Transaksi</th>
                            <th>Produk</th>
                            <th>Tanggal</th>
                            <th>Total</th>
                            <th>Status</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody id="historyTableBody">
                        <!-- Riwayat akan dimuat otomatis oleh JavaScript -->
                    </tbody>
                </table>
            </div>
        </section>

        <section id="informasi">
            <h2 class="section-title"><i class="fas fa-info-circle"></i> Informasi Website</h2>
            
            <div class="info-grid">
                <div class="info-card">
                    <h3 style="color: var(--primary); margin-bottom: 1.5rem;">Kontak Kami</h3>
                    <div class="contact-info">
                        <div>
                            <i class="fas fa-phone-alt"></i>
                            <div>
                                <h4>Telepon / WhatsApp (Bot)</h4>
                                <p>+62 822-7696-9027</p>
                            </div>
                        </div>
                        <div>
                            <i class="fas fa-headset"></i>
                            <div>
                                <h4>Customer Service</h4>
                                <p>+62 882-9503-9238</p>
                            </div>
                        </div>
                        <div>
                            <i class="fas fa-envelope"></i>
                            <div>
                                <h4>Email</h4>
                                <p>zaenulenka@gmail.com</p>
                            </div>
                        </div>
                        <div>
                            <i class="fas fa-globe"></i>
                            <div>
                                <h4>Website</h4>
                                <p>zarrstore.my.id</p>
                            </div>
                        </div>
                    </div>
                    
                    <h4 style="color: var(--primary); margin-top: 2rem;">Media Sosial</h4>
                    <div class="social-links">
                        <a href="https://wa.me/62882276969027" class="wa" target="_blank">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                        <a href="https://instagram.com/mee.zarr" class="ig" target="_blank">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://tiktok.com/@iki.sizarr" class="tiktok" target="_blank">
                            <i class="fab fa-tiktok"></i>
                        </a>
                    </div>
                </div>
                
                <div class="info-card">
                    <h3 style="color: var(--primary); margin-bottom: 1.5rem;">Collaborator & Support</h3>
                    <p>Terima kasih kepada semua yang telah mendukung ZarrStore:</p>
                    
                    <div class="supporters" id="collaboratorsList">
                        <!-- Daftar supporter akan dibuat otomatis -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal untuk detail jam operasional -->
    <div class="store-hours-modal" id="storeHoursModal">
        <div class="store-hours-modal-content">
            <button class="store-hours-modal-close" id="storeHoursModalClose">&times;</button>
            <h3 class="store-hours-modal-title">Jam Operasional ZarrStoreID</h3>
            
            <div class="store-hours-list" id="storeHoursList">
                <!-- Daftar jam operasional akan diisi oleh JavaScript -->
            </div>
            
            <div class="store-hours-current">
                <p>Status saat ini: <strong id="modalCurrentStatus">Loading...</strong></p>
                <div class="store-hours-current-time" id="modalCurrentTime">Loading...</div>
                <p><small id="modalNextChange">Loading...</small></p>
            </div>
            
            <div class="store-hours-note">
                <p><i class="fas fa-info-circle"></i> <strong>Catatan:</strong> Pemesanan di luar jam operasional akan diproses pada hari berikutnya ketika toko buka.</p>
            </div>
        </div>
    </div>

    <!-- Modal Order dengan VERIFIKASI CLOUDFLARE STYLE -->
    <div class="modal" id="orderModal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">&times;</button>
            <h2 style="color: var(--primary); margin-bottom: 1.5rem;">Form Pemesanan</h2>
            
            <form id="orderForm">
                <div class="form-group">
                    <label for="orderProduct">Produk yang Dipesan</label>
                    <input type="text" id="orderProduct" class="form-control" readonly>
                </div>
                
                <div class="form-group">
                    <label for="orderPrice">Harga</label>
                    <input type="text" id="orderPrice" class="form-control" readonly>
                </div>
                
                <div class="form-group">
                    <label for="customerName">Nama *</label>
                    <input type="text" id="customerName" class="form-control" required placeholder="Masukkan nama anda">
                </div>
                
                <div class="form-group">
                    <label for="customerPhone">Nomor WhatsApp *</label>
                    <input type="tel" id="customerPhone" class="form-control" required placeholder="Contoh: 088295039238">
                </div>
                
                <div class="form-group">
                    <label for="gameId">ID Game / Nomor HP *</label>
                    <input type="text" id="gameId" class="form-control" required placeholder="Masukkan ID Game atau nomor HP">
                </div>
                
                <div class="form-group">
                    <label for="paymentMethod">Metode Pembayaran *</label>
                    <select id="paymentMethod" class="form-control" required>
                        <option value="">Pilih metode pembayaran</option>
                        <option value="DANA">DANA</option>
                        <option value="GOPAY">GOPAY</option>
                        <option value="OVO">OVO</option>
                        <option value="QRIS">QRIS</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="additionalNotes">Catatan Tambahan</label>
                    <textarea id="additionalNotes" class="form-control" rows="3" placeholder="Keterangan tambahan jika ada"></textarea>
                </div>
                
                <!-- Verifikasi Saya Bukan Robot -->
                <div class="robot-verification">
                    <div class="robot-checkbox" id="robotCheckbox">
                        <input type="checkbox" id="robotCheck" style="display: none;">
                        <div class="robot-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <span class="robot-text">Saya Bukan Robot</span>
                    </div>
                </div>
                
                <!-- CLOUDFLARE STYLE VERIFICATION CONTAINER -->
                <div class="captcha-container">
                    <h4 style="color: var(--primary); margin-bottom: 1rem;">Verifikasi Keamanan</h4>
                    <p style="color: var(--gray); font-size: 0.9rem; margin-bottom: 1.5rem;">
                        Lengkapi verifikasi di bawah ini untuk melanjutkan:
                    </p>
                    
                    <!-- CloudFlare Style Verification Box -->
                    <div class="cloudflare-verification" style="
                        background: linear-gradient(135deg, #f8f9ff 0%, #f0f4ff 100%);
                        border-radius: 12px;
                        padding: 2rem;
                        border: 1px solid #d1e3ff;
                        text-align: center;
                        margin-bottom: 1.5rem;
                        box-shadow: 0 5px 15px rgba(106, 17, 203, 0.08);
                        position: relative;
                        overflow: hidden;
                    ">
                        <!-- Background decorative elements -->
                        <div style="
                            position: absolute;
                            top: -50px;
                            right: -50px;
                            width: 100px;
                            height: 100px;
                            background: linear-gradient(135deg, rgba(106, 17, 203, 0.05) 0%, rgba(37, 117, 252, 0.05) 100%);
                            border-radius: 50%;
                        "></div>
                        <div style="
                            position: absolute;
                            bottom: -30px;
                            left: -30px;
                            width: 80px;
                            height: 80px;
                            background: linear-gradient(135deg, rgba(255, 77, 166, 0.05) 0%, rgba(255, 107, 0, 0.05) 100%);
                            border-radius: 50%;
                        "></div>
                        
                        <!-- CloudFlare Logo & Header -->
                        <div style="
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            gap: 12px;
                            margin-bottom: 20px;
                            position: relative;
                            z-index: 2;
                        ">
                            <div style="
                                width: 40px;
                                height: 40px;
                                background: linear-gradient(135deg, #fa5d75, #f68b1a);
                                border-radius: 50%;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                color: white;
                                font-weight: bold;
                                font-size: 18px;
                                box-shadow: 0 4px 10px rgba(250, 93, 117, 0.3);
                                border: 2px solid white;
                                animation: pulse 2s infinite;
                            ">
                                C
                            </div>
                            <div style="text-align: left;">
                                <span style="
                                    font-weight: 800;
                                    color: #212529;
                                    font-size: 1.3rem;
                                    letter-spacing: 0.5px;
                                    font-family: 'Montserrat', sans-serif;
                                    display: block;
                                    line-height: 1;
                                ">
                                    CLOUDFLARE
                                </span>
                                <span style="
                                    font-size: 0.85rem;
                                    color: #6c757d;
                                    letter-spacing: 0.3px;
                                ">
                                    Security Verification
                                </span>
                            </div>
                        </div>
                        
                        <!-- Verification Status Text -->
                        <div style="
                            color: #495057;
                            margin-bottom: 25px;
                            font-size: 0.95rem;
                            line-height: 1.6;
                            position: relative;
                            z-index: 2;
                            background: rgba(255, 255, 255, 0.7);
                            padding: 15px;
                            border-radius: 8px;
                            border: 1px solid rgba(0,0,0,0.05);
                        ">
                            <div style="
                                margin-bottom: 8px; 
                                font-weight: 600;
                                color: #6a11cb;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                gap: 8px;
                            ">
                                <i class="fas fa-shield-alt"></i>
                                <span>Privasi  Suarat</span>
                            </div>
                            <div id="verificationText" style="
                                font-size: 0.9rem;
                                color: #6c757d;
                                font-weight: 500;
                            ">
                                Melakukan verifikasi...
                            </div>
                        </div>
                        
                        <!-- Animated Progress Bar -->
                        <div style="
                            width: 100%;
                            height: 8px;
                            background: linear-gradient(90deg, #e9ecef, #dee2e6);
                            border-radius: 4px;
                            margin-bottom: 30px;
                            overflow: hidden;
                            position: relative;
                            z-index: 2;
                            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
                        ">
                            <div id="cloudflareProgress" style="
                                width: 0%;
                                height: 100%;
                                background: linear-gradient(90deg, #6a11cb 0%, #2575fc 50%, #6a11cb 100%);
                                background-size: 200% 100%;
                                border-radius: 4px;
                                transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
                                position: relative;
                                overflow: hidden;
                                animation: progressShimmer 2s infinite linear;
                            ">
                                <div style="
                                    position: absolute;
                                    top: 0;
                                    left: 0;
                                    width: 100%;
                                    height: 100%;
                                    background: linear-gradient(90deg, 
                                        rgba(255,255,255,0) 0%, 
                                        rgba(255,255,255,0.8) 50%, 
                                        rgba(255,255,255,0) 100%);
                                    animation: shimmer 1.5s infinite;
                                "></div>
                            </div>
                        </div>
                        
                        <!-- Verification Controls -->
                        <div class="verification-controls" style="
                            display: flex; 
                            gap: 12px;
                            position: relative;
                            z-index: 2;
                        ">
                            <button type="button" id="startVerification" style="
                                flex: 1;
                                padding: 16px 24px;
                                background: linear-gradient(135deg, #6a11cb, #2575fc);
                                color: white;
                                border: none;
                                border-radius: 10px;
                                font-weight: 600;
                                cursor: pointer;
                                transition: all 0.3s ease;
                                font-size: 1rem;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                gap: 10px;
                                box-shadow: 0 6px 20px rgba(106, 17, 203, 0.25);
                                position: relative;
                                overflow: hidden;
                            ">
                                <div style="
                                    position: absolute;
                                    top: 0;
                                    left: -100%;
                                    width: 100%;
                                    height: 100%;
                                    background: linear-gradient(90deg, 
                                        rgba(255,255,255,0) 0%, 
                                        rgba(255,255,255,0.3) 50%, 
                                        rgba(255,255,255,0) 100%);
                                    transition: left 0.5s;
                                "></div>
                                <i class="fas fa-shield-alt"></i>
                                <span>Mulai Verifikasi</span>
                            </button>
                        </div>
                        
                        <!-- Verification Info -->
                        <div style="
                            margin-top: 20px;
                            padding: 15px;
                            background: rgba(106, 17, 203, 0.08);
                            border-radius: 10px;
                            border-left: 4px solid #6a11cb;
                            position: relative;
                            z-index: 2;
                            text-align: left;
                            display: flex;
                            align-items: flex-start;
                            gap: 12px;
                        ">
                            <i class="fas fa-info-circle" style="
                                margin-top: 2px;
                                color: #6a11cb;
                                font-size: 1.1rem;
                            "></i>
                            <div>
                                <div style="font-weight: 600; margin-bottom: 4px; color: #6a11cb;">
                                    Keamanan Terverifikasi
                                </div>
                                <div style="color: #6c757d;">
                                    Verifikasi ini membantu mencegah akses tidak sah dan melindungi data Anda
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Status Display -->
                    <div class="captcha-status" id="captchaStatus" style="
                        text-align: center;
                        padding: 16px 20px;
                        border-radius: 10px;
                        margin-top: 15px;
                        font-size: 0.95rem;
                        min-height: 20px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        gap: 12px;
                        opacity: 0;
                        transform: translateY(-10px);
                        transition: all 0.4s ease;
                        background: linear-gradient(135deg, #f8f9ff, #f0f4ff);
                        border: 1px solid #e0e9ff;
                    "></div>
                </div>
                
                <button type="button" class="btn-whatsapp" id="sendWhatsApp" disabled>
                    <i class="fas fa-lock"></i> Selesaikan Verifikasi
                </button>
            </form>
        </div>
    </div>

    <!-- MODAL ADMIN LOGIN -->
    <div class="admin-login-modal" id="adminLoginModal">
        <div class="admin-login-content">
            <button class="modal-close" id="adminModalClose">&times;</button>
            <h2 style="color: var(--primary); margin-bottom: 1.5rem;">Login Admin</h2>
            <div class="form-group">
                <label for="adminPassword">Password Admin</label>
                <input type="password" id="adminPassword" class="form-control" placeholder="Masukkan password admin">
                <small style="color: var(--gray); display: block; margin-top: 5px;">Password default: admin123</small>
            </div>
            <button class="btn-whatsapp" id="adminLoginBtn" style="margin-top: 1.5rem;">
                <i class="fas fa-sign-in-alt"></i> Login
            </button>
        </div>
    </div>

    <!-- MODAL TAMBAH/EDIT FOLDER -->
    <div class="modal" id="folderModal">
        <div class="modal-content">
            <button class="modal-close" id="folderModalClose">&times;</button>
            <h2 style="color: var(--primary); margin-bottom: 1.5rem;" id="folderModalTitle">Tambah Folder Baru</h2>
            
            <form id="folderForm">
                <div class="form-group">
                    <label for="folderKey">Kode Folder *</label>
                    <input type="text" id="folderKey" class="form-control" required placeholder="Contoh: game, pulsa, kuota">
                    <small style="color: var(--gray);">Harus unik, gunakan huruf kecil tanpa spasi</small>
                </div>
                
                <div class="form-group">
                    <label for="folderName">Nama Folder *</label>
                    <input type="text" id="folderName" class="form-control" required placeholder="Contoh: Top Up Game">
                </div>
                
                <div class="form-group">
                    <label for="folderDescription">Deskripsi Folder</label>
                    <textarea id="folderDescription" class="form-control" rows="3" placeholder="Deskripsi singkat tentang folder ini"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="folderIconType">Jenis Ikon</label>
                    <select id="folderIconType" class="form-control">
                        <option value="emoji">Emoji</option>
                        <option value="fontawesome">FontAwesome</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="folderIconEmoji">Ikon Emoji</label>
                    <input type="text" id="folderIconEmoji" class="form-control" placeholder="" value="">
                    <small style="color: var(--gray);">Masukkan emoji untuk ikon folder</small>
                </div>
                
                <div class="form-group" id="folderIconFontAwesomeGroup" style="display: none;">
                    <label for="folderIconFontAwesome">Ikon FontAwesome</label>
                    <input type="text" id="folderIconFontAwesome" class="form-control" placeholder="fas fa-gamepad">
                    <small style="color: var(--gray);">Contoh: fas fa-gamepad, fas fa-phone-alt</small>
                </div>
                
                <div class="form-group">
                    <label for="folderColor">Warna Folder</label>
                    <input type="color" id="folderColor" class="form-control" value="#6a11cb" style="height: 50px;">
                </div>
                
                <button type="submit" class="btn-whatsapp" id="saveFolderBtn">
                    <i class="fas fa-save"></i> Simpan Folder
                </button>
            </form>
        </div>
    </div>

    <!-- MODAL TAMBAH/EDIT PRODUK -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <button class="modal-close" id="productModalClose">&times;</button>
            <h2 style="color: var(--primary); margin-bottom: 1.5rem;" id="productModalTitle">Tambah Produk Baru</h2>
            
            <form id="productForm">
                <div class="form-group">
                    <label for="productFolder">Folder *</label>
                    <select id="productFolder" class="form-control" required onchange="updateSubfolderOptions()">
                        <option value="">Pilih Folder</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="productSubfolder">Subfolder *</label>
                    <select id="productSubfolder" class="form-control" required>
                        <option value="">Pilih Subfolder</option>
                        <option value="new">+ Buat Subfolder Baru</option>
                    </select>
                </div>
                
                <div class="form-group" id="newSubfolderGroup" style="display: none;">
                    <label for="newSubfolderName">Nama Subfolder Baru *</label>
                    <input type="text" id="newSubfolderName" class="form-control" placeholder="Contoh: Valorant">
                    
                    <label for="newSubfolderKey" style="margin-top: 10px;">Kode Subfolder *</label>
                    <input type="text" id="newSubfolderKey" class="form-control" placeholder="Contoh: valorant">
                    <small style="color: var(--gray);">Huruf kecil tanpa spasi</small>
                </div>
                
                <div class="form-group">
                    <label for="productName">Nama Produk *</label>
                    <input type="text" id="productName" class="form-control" required placeholder="Contoh: 86 Diamond">
                </div>
                
                <div class="form-group">
                    <label for="productPrice">Harga (Rp) *</label>
                    <input type="number" id="productPrice" class="form-control" required placeholder="25000" min="1000">
                </div>
                
                <div class="form-group">
                    <label for="productDescription">Deskripsi Produk</label>
                    <textarea id="productDescription" class="form-control" rows="3" placeholder="Deskripsi singkat produk"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="productImage">URL Gambar Produk (Opsional)</label>
                    <input type="url" id="productImage" class="form-control" placeholder="https://example.com/image.jpg">
                    <small style="color: var(--gray);">Link gambar produk (jika ada)</small>
                </div>
                
                <button type="submit" class="btn-whatsapp" id="saveProductBtn">
                    <i class="fas fa-save"></i> Simpan Produk
                </button>
            </form>
        </div>
    </div>

    <!-- MODAL KONFIRMASI HAPUS -->
    <div class="delete-confirm-modal" id="deleteConfirmModal">
        <div class="delete-confirm-content">
            <h3 style="color: var(--danger); margin-bottom: 1.5rem;" id="deleteConfirmTitle">Konfirmasi Hapus</h3>
            <p id="deleteConfirmMessage">Apakah Anda yakin ingin menghapus item ini?</p>
            
            <div class="delete-actions">
                <button class="edit-btn delete" id="confirmDeleteBtn">
                    <i class="fas fa-trash"></i> Ya, Hapus
                </button>
                <button class="edit-btn edit" id="cancelDeleteBtn">
                    <i class="fas fa-times"></i> Batal
                </button>
            </div>
        </div>
    </div>

    <!-- Floating WhatsApp -->
    <a href="https://wa.me/62882276969027?text=Halo%20ZarrStoreID,%20saya%20ingin%20bertanya%20tentang%20produk" class="floating-wa" target="_blank">
        <i class="fab fa-whatsapp"></i>
    </a>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3 id="storeNameFooter">ZarrStoreID</h3>
                <p>Toko online terpercaya untuk top up game, Sewa Bot WhatsApp, Langganan Aplikasi Premium, dan Isi pulsa/Kuota semua operator di Indonesia</p>
            </div>
            
            <div class="footer-section">
                <h3>Metode Pembayaran</h3>
                <p>DANA, GOPAY, OVO, QRIS</p>
                <p>Pembayaran aman dan terenkripsi</p>
            </div>
            
            <div class="footer-section">
                <h3>Layanan Pelanggan</h3>
                <p>WhatsApp Bot: +62 822-7696-9027</p>
                <p>Customer Service: +62 882-9503-9238</p>
                <p>Email: zaenulenka@gmail.com</p>
            </div>
        </div>
        
        <div class="copyright">
            <p>&copy; 2023 - <span id="currentYear">2026</span> <span id="storeNameCopyright">ZarrStoreID</span>. zarrstore.my.id. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // ==================== KONFIGURASI TOKO ====================
        const STORE_CONFIG = {
            storeName: "ZarrStoreID",
            phoneNumber: "62882276969027", // NOMOR BOT
            customerServiceNumber: "6288295039238", // NOMOR CUSTOMER SERVICE
            qrisUrl: "https://files.catbox.moe/xxxxxx.png",
            storeLogo: "https://files.catbox.moe/gua633.jpg",
            
            // KONFIGURASI BANNER WELCOME BARU - BISA DICUStOM
            welcomeBanner: {
                imageUrl: "https://res.cloudinary.com/dtbecoist/image/upload/v1768388950/BENNER_ZARR_f7wyhq.png",
                title: "ZarrStoreID",
                subtitle: "Agen Konter Digital Yang Aman & Terpercaya",
                showOnAllDevices: true
            },
            
            // ==================== KONFIGURASI JAM OPERASIONAL ====================
            storeHours: {
                regular: { open: 6, close: 22 },
                weekend: { open: 6, close: 23 },
                timezone: "WIB"
            },
            
            // ==================== KONFIGURASI IKON KUSTOM ====================
            customIcons: {
                // Ikon untuk folder utama
                folderIcons: {
                    game: { 
                        emoji: "", 
                        fontAwesome: "fas fa-gamepad",
                        color: "#2575fc",
                        type: "emoji"
                    },
                    pulsa: { 
                        emoji: "", 
                        fontAwesome: "fas fa-phone-alt",
                        color: "#00AA13",
                        type: "emoji"
                    },
                    kuota: { 
                        emoji: "", 
                        fontAwesome: "fas fa-wifi",
                        color: "#FF6B00",
                        type: "emoji"
                    },
                    bot: { 
                        emoji: "", 
                        fontAwesome: "fas fa-robot",
                        color: "#ff4da6",
                        type: "emoji"
                    },
                    editor: { 
                        emoji: "", 
                        fontAwesome: "fas fa-crown",
                        color: "#4C2A86",
                        type: "emoji"
                    }
                },
                
                // Ikon untuk subfolder
                subfolderIcons: {
                    mobile_legends: { 
                        emoji: "", 
                        fontAwesome: "fas fa-swords",
                        type: "emoji"
                    },
                    free_fire: { 
                        emoji: "", 
                        fontAwesome: "fas fa-gun",
                        type: "emoji"
                    },
                    pubg_mobile: { 
                        emoji: "", 
                        fontAwesome: "fas fa-bullseye",
                        type: "emoji"
                    },
                    telkomsel: { 
                        emoji: "", 
                        fontAwesome: "fas fa-mobile-alt",
                        type: "emoji"
                    },
                    indosat: { 
                        emoji: "", 
                        fontAwesome: "fas fa-signal",
                        type: "emoji"
                    },
                    xl: { 
                        emoji: "", 
                        fontAwesome: "fas fa-vibrate",
                        type: "emoji"
                    },
                    telkomsel_kuota: { 
                        emoji: "", 
                        fontAwesome: "fas fa-globe",
                        type: "emoji"
                    },
                    indosat_kuota: { 
                        emoji: "", 
                        fontAwesome: "fas fa-satellite-dish",
                        type: "emoji"
                    },
                    bot_basic: { 
                        emoji: "", 
                        fontAwesome: "fas fa-robot",
                        type: "emoji"
                    },
                    bot_premium: { 
                        emoji: "", 
                        fontAwesome: "fas fa-crown",
                        type: "emoji"
                    },
                    video_editor: { 
                        emoji: "", 
                        fontAwesome: "fas fa-video",
                        type: "emoji"
                    },
                    photo_editor: { 
                        emoji: "", 
                        fontAwesome: "fas fa-image",
                        type: "emoji"
                    }
                },
                
                // Pengaturan global ikon
                settings: {
                    defaultType: "emoji", // "emoji" atau "fontawesome"
                    useCustomIcons: true,
                    allowDeveloperOverride: true
                }
            }
        };

        // ==================== SISTEM PRODUK BERBASIS FOLDER ====================
        let PRODUCT_FOLDERS = {
            game: {
                name: "Top Up Game",
                description: "Top up semua game favorit Anda",
                subfolders: {
                    mobile_legends: {
                        name: "Mobile Legends",
                        products: [
                            { id: 1, name: "86 Diamond", price: 25000, description: "Diamond termurah" },
                            { id: 2, name: "172 Diamond", price: 50000, description: "Pilihan terpopuler" },
                            { id: 3, name: "257 Diamond", price: 75000, description: "Value terbaik" },
                            { id: 4, name: "344 Diamond", price: 100000, description: "Diamond banyak" },
                            { id: 5, name: "429 Diamond", price: 125000, description: "Untuk pro player" }
                        ]
                    },
                    free_fire: {
                        name: "Free Fire",
                        products: [
                            { id: 6, name: "100 Diamond", price: 30000, description: "Diamond FF" },
                            { id: 7, name: "210 Diamond", price: 60000, description: "Hemat 10%" },
                            { id: 8, name: "530 Diamond", price: 150000, description: "Best seller" },
                            { id: 9, name: "1060 Diamond", price: 300000, description: "Maximal" }
                        ]
                    },
                    pubg_mobile: {
                        name: "PUBG Mobile",
                        products: [
                            { id: 10, name: "125 UC", price: 35000, description: "UC PUBG" },
                            { id: 11, name: "420 UC", price: 115000, description: "Paket hemat" }
                        ]
                    }
                }
            },
            
            pulsa: {
                name: "Isi Pulsa",
                description: "Pulsa semua operator 24 jam",
                subfolders: {
                    telkomsel: {
                        name: "Telkomsel",
                        products: [
                            { id: 12, name: "Pulsa 5.000", price: 7000, description: "Reguler" },
                            { id: 13, name: "Pulsa 10.000", price: 12000, description: "Ekonomis" },
                            { id: 14, name: "Pulsa 25.000", price: 27000, description: "Best seller" },
                            { id: 15, name: "Pulsa 50.000", price: 52000, description: "Hemat 4%" },
                            { id: 16, name: "Pulsa 100.000", price: 102000, description: "Super hemat" }
                        ]
                    },
                    indosat: {
                        name: "Indosat",
                        products: [
                            { id: 17, name: "Pulsa 5.000", price: 6800, description: "Reguler" },
                            { id: 18, name: "Pulsa 10.000", price: 11800, description: "Ekonomis" },
                            { id: 19, name: "Pulsa 25.000", price: 26500, description: "Best seller" }
                        ]
                    },
                    xl: {
                        name: "XL/Axis",
                        products: [
                            { id: 20, name: "Pulsa 5.000", price: 6900, description: "Reguler" },
                            { id: 21, name: "Pulsa 10.000", price: 11900, description: "Ekonomis" }
                        ]
                    }
                }
            },
            
            kuota: {
                name: "Paket Kuota",
                description: "Kuota internet murah",
                subfolders: {
                    telkomsel_kuota: {
                        name: "Telkomsel",
                        products: [
                            { id: 22, name: "Kuota 1GB 7 Hari", price: 15000, description: "1GB 24 jam" },
                            { id: 23, name: "Kuota 3GB 30 Hari", price: 35000, description: "3GB malam" },
                            { id: 24, name: "Kuota 10GB 30 Hari", price: 75000, description: "10GB all apps" }
                        ]
                    },
                    indosat_kuota: {
                        name: "Indosat",
                        products: [
                            { id: 25, name: "Freedom 10GB", price: 25000, description: "10GB 24 jam" },
                            { id: 26, name: "Super 25GB", price: 50000, description: "25GB malam" }
                        ]
                    }
                }
            },
            
            bot: {
                name: "Sewa Bot WhatsApp",
                description: "Bot WA multifungsi premium",
                subfolders: {
                    bot_basic: {
                        name: "Paket Basic",
                        products: [
                            { id: 27, name: "Sewa 1 Minggu", price: 15000, description: "Full fitur" },
                            { id: 28, name: "Sewa 1 Bulan", price: 50000, description: "Hemat 28%" },
                            { id: 29, name: "Sewa 3 Bulan", price: 120000, description: "Hemat 33%" }
                        ]
                    },
                    bot_premium: {
                        name: "Paket Premium",
                        products: [
                            { id: 30, name: "Sewa 6 Bulan", price: 200000, description: "Full support" },
                            { id: 31, name: "Sewa 1 Tahun", price: 350000, description: "Best value" }
                        ]
                    }
                }
            },
            
            editor: {
                name: "Aplikasi Premium",
                description: "Aplikasi editor premium",
                subfolders: {
                    video_editor: {
                        name: "Video Editor",
                        products: [
                            { id: 32, name: "Alight Motion Pro", price: 10000, description: "1 Tahun" },
                            { id: 33, name: "KineMaster Pro", price: 15000, description: "Lifetime" },
                            { id: 34, name: "InShot Pro", price: 12000, description: "Unlocked" }
                        ]
                    },
                    photo_editor: {
                        name: "Photo Editor",
                        products: [
                            { id: 35, name: "PicsArt Gold", price: 8000, description: "1 Tahun" },
                            { id: 36, name: "Lightroom Pro", price: 10000, description: "Premium" }
                        ]
                    }
                }
            }
        };

        // ==================== MODE EDIT & ADMIN SYSTEM ====================
        let isEditMode = false;
        let isAdminMode = false;
        const ADMIN_PASSWORD = "admin123"; // Password sederhana untuk masuk mode admin
        let currentEditingProductId = null;
        let currentEditingSubfolder = null;
        let currentEditingFolder = null;
        let deleteCallback = null;
        let deleteType = null; // 'folder', 'subfolder', 'product'
        let deleteData = null;

        // ==================== FUNGSI UNTUK MENDAPATKAN IKON ====================
        function getFolderIcon(folderKey, iconType = null) {
            // Jika custom icons dinonaktifkan, gunakan default
            if (!STORE_CONFIG.customIcons.settings.useCustomIcons) {
                const defaultIcons = {
                    game: "",
                    pulsa: "",
                    kuota: "",
                    bot: "",
                    editor: ""
                };
                return { 
                    html: defaultIcons[folderKey] || "", 
                    type: "emoji",
                    color: "#6a11cb"
                };
            }
            
            // Ambil konfigurasi ikon
            const iconConfig = STORE_CONFIG.customIcons.folderIcons[folderKey];
            
            if (!iconConfig) {
                return { 
                    html: "", 
                    type: "emoji",
                    color: "#6a11cb"
                };
            }
            
            // Tentukan jenis ikon yang akan digunakan
            const type = iconType || iconConfig.type || STORE_CONFIG.customIcons.settings.defaultType;
            
            let html = "";
            if (type === "fontawesome" && iconConfig.fontAwesome) {
                html = `<i class="${iconConfig.fontAwesome}"></i>`;
            } else {
                html = iconConfig.emoji || "";
            }
            
            return {
                html: html,
                type: type,
                color: iconConfig.color || "#6a11cb"
            };
        }

        function getSubfolderIcon(folderKey, subfolderKey, iconType = null) {
            // Jika custom icons dinonaktifkan, gunakan default
            if (!STORE_CONFIG.customIcons.settings.useCustomIcons) {
                const defaultIcons = {
                    mobile_legends: "",
                    free_fire: "",
                    pubg_mobile: "",
                    telkomsel: "",
                    indosat: "",
                    xl: "",
                    telkomsel_kuota: "",
                    indosat_kuota: "",
                    bot_basic: "",
                    bot_premium: "",
                    video_editor: "",
                    photo_editor: ""
                };
                return { 
                    html: defaultIcons[subfolderKey] || "", 
                    type: "emoji"
                };
            }
            
            // Ambil konfigurasi ikon
            const iconConfig = STORE_CONFIG.customIcons.subfolderIcons[subfolderKey];
            
            if (!iconConfig) {
                return { 
                    html: "", 
                    type: "emoji"
                };
            }
            
            // Tentukan jenis ikon yang akan digunakan
            const type = iconType || iconConfig.type || STORE_CONFIG.customIcons.settings.defaultType;
            
            let html = "";
            if (type === "fontawesome" && iconConfig.fontAwesome) {
                html = `<i class="${iconConfig.fontAwesome}"></i>`;
            } else {
                html = iconConfig.emoji || "";
            }
            
            return {
                html: html,
                type: type
            };
        }

        // ==================== FUNGSI ADMIN SYSTEM ====================
        function toggleAdminMode() {
            if (!isAdminMode) {
                openAdminLoginModal();
            } else {
                isAdminMode = false;
                isEditMode = false;
                updateAdminUI();
                showNotification("Admin mode dinonaktifkan", "info");
            }
        }

        function openAdminLoginModal() {
            const modal = document.getElementById('adminLoginModal');
            modal.style.display = 'flex';
            
            // Setup event listeners
            document.getElementById('adminModalClose').onclick = function() {
                modal.style.display = 'none';
            };
            
            document.getElementById('adminLoginBtn').onclick = function() {
                const password = document.getElementById('adminPassword').value;
                if (password === ADMIN_PASSWORD) {
                    isAdminMode = true;
                    modal.style.display = 'none';
                    updateAdminUI();
                    showNotification("Admin mode diaktifkan!", "success");
                } else {
                    showNotification("Password salah!", "error");
                }
            };
            
            // Enter key to submit
            document.getElementById('adminPassword').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    document.getElementById('adminLoginBtn').click();
                }
            });
        }

        function updateAdminUI() {
            const adminBtn = document.getElementById('adminToggleBtn');
            const editControls = document.getElementById('editModeControls');
            const addProductBtn = document.getElementById('addProductBtn');
            
            if (isAdminMode) {
                adminBtn.innerHTML = '<i class="fas fa-user-shield"></i> Admin: ON';
                adminBtn.style.background = 'linear-gradient(to right, #00b09b, #96c93d)';
                editControls.style.display = 'flex';
                
                if (currentView === 'subfolder' && currentFolder) {
                    addProductBtn.style.display = 'block';
                }
            } else {
                adminBtn.innerHTML = '<i class="fas fa-user-shield"></i> Admin Mode';
                adminBtn.style.background = 'linear-gradient(to right, #6a11cb, #2575fc)';
                editControls.style.display = 'none';
                addProductBtn.style.display = 'none';
            }
            
            // Re-render current view to show/hide edit buttons
            if (currentView === 'folders') {
                renderFolderView();
            } else if (currentView === 'subfolder' && currentFolder) {
                renderSubfolderView(currentFolder, currentSubfolder);
            }
        }

        function toggleEditMode() {
            if (!isAdminMode) {
                showNotification("Harus masuk admin mode terlebih dahulu!", "error");
                return;
            }
            
            isEditMode = !isEditMode;
            const editBtn = document.querySelector('.edit-btn.edit');
            
            if (isEditMode) {
                editBtn.innerHTML = '<i class="fas fa-edit"></i> Edit Mode: ON';
                editBtn.style.background = 'linear-gradient(to right, #00b09b, #96c93d)';
                showNotification("Edit mode diaktifkan", "success");
            } else {
                editBtn.innerHTML = '<i class="fas fa-edit"></i> Edit Mode: OFF';
                editBtn.style.background = 'linear-gradient(to right, var(--warning), #ff9500)';
                showNotification("Edit mode dinonaktifkan", "info");
            }
            
            // Re-render current view to show/hide edit buttons
            if (currentView === 'folders') {
                renderFolderView();
            } else if (currentView === 'subfolder' && currentFolder) {
                renderSubfolderView(currentFolder, currentSubfolder);
            }
        }

        // ==================== MODIFIKASI FUNGSI RENDER FOLDER VIEW ====================
        function renderFolderView() {
            const folderView = document.getElementById('folderView');
            const subfolderView = document.getElementById('subfolderView');
            const allProductsView = document.getElementById('allProductsView');
            
            // Set view state
            currentView = 'folders';
            currentFolder = null;
            currentSubfolder = null;
            
            folderView.style.display = 'grid';
            subfolderView.style.display = 'none';
            allProductsView.style.display = 'none';
            
            // Clear folder view
            folderView.innerHTML = '';
            
            // Render all folders
            for (const folderKey in PRODUCT_FOLDERS) {
                const folder = PRODUCT_FOLDERS[folderKey];
                
                // Count total products in this folder
                let totalProducts = 0;
                for (const subfolderKey in folder.subfolders) {
                    totalProducts += folder.subfolders[subfolderKey].products.length;
                }
                
                // Get folder icon
                const folderIcon = getFolderIcon(folderKey);
                
                // Create folder card
                const folderCard = document.createElement('div');
                folderCard.className = 'folder-card';
                folderCard.dataset.folder = folderKey;
                
                // Add edit indicator if in edit mode
                let editIndicator = '';
                let editButtons = '';
                
                if (isEditMode && isAdminMode) {
                    editIndicator = '<div class="edit-indicator">EDIT</div>';
                    editButtons = `
                        <div class="folder-edit-btns">
                            <button class="edit-icon-btn edit" onclick="editFolder('${folderKey}')" title="Edit Folder">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="edit-icon-btn delete" onclick="confirmDeleteFolder('${folderKey}')" title="Hapus Folder">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                }
                
                folderCard.innerHTML = `
                    ${editIndicator}
                    ${editButtons}
                    <div class="folder-header">
                        <div class="folder-icon" style="background: ${folderIcon.color}">
                            ${folderIcon.html}
                        </div>
                        <div class="folder-info">
                            <h3 class="folder-title">${folder.name}</h3>
                            <p class="folder-desc">${folder.description}</p>
                        </div>
                    </div>
                    <div class="folder-content">
                        ${Object.keys(folder.subfolders).map(subfolderKey => {
                            const subfolder = folder.subfolders[subfolderKey];
                            const subfolderIcon = getSubfolderIcon(folderKey, subfolderKey);
                            
                            let subfolderEditBtns = '';
                            if (isEditMode && isAdminMode) {
                                subfolderEditBtns = `
                                    <div style="display: flex; gap: 5px; margin-left: auto;">
                                        <button class="edit-icon-btn edit" onclick="editSubfolder('${folderKey}', '${subfolderKey}')" title="Edit Subfolder" style="width: 25px; height: 25px; font-size: 0.7rem;">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="edit-icon-btn delete" onclick="confirmDeleteSubfolder('${folderKey}', '${subfolderKey}')" title="Hapus Subfolder" style="width: 25px; height: 25px; font-size: 0.7rem;">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                `;
                            }
                            
                            return `
                                <div class="subfolder-item" data-folder="${folderKey}" data-subfolder="${subfolderKey}">
                                    <div class="subfolder-icon">${subfolderIcon.html}</div>
                                    <div class="subfolder-info">
                                        <div class="subfolder-name">${subfolder.name}</div>
                                        <div class="subfolder-count">${subfolder.products.length} produk</div>
                                    </div>
                                    ${subfolderEditBtns}
                                    ${!isEditMode ? '<i class="fas fa-chevron-right" style="color: var(--gray);"></i>' : ''}
                                </div>
                            `;
                        }).join('')}
                        
                        ${isEditMode && isAdminMode ? `
                            <div class="add-subfolder-btn" onclick="openAddSubfolderModal('${folderKey}')">
                                <i class="fas fa-plus-circle"></i>
                                <span>Tambah Subfolder</span>
                            </div>
                        ` : ''}
                    </div>
                    <div class="folder-footer">
                        <div class="product-count">
                            <i class="fas fa-box"></i> ${totalProducts} produk
                        </div>
                        <button class="folder-action" data-folder="${folderKey}">
                            Lihat Semua
                        </button>
                    </div>
                `;
                
                folderView.appendChild(folderCard);
            }
            
            // Add event listeners for subfolder items
            document.querySelectorAll('.subfolder-item').forEach(item => {
                item.addEventListener('click', function() {
                    const folderKey = this.dataset.folder;
                    const subfolderKey = this.dataset.subfolder;
                    renderSubfolderView(folderKey, subfolderKey);
                });
            });
            
            // Add event listeners for folder actions
            document.querySelectorAll('.folder-action').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const folderKey = this.dataset.folder;
                    renderSubfolderView(folderKey, 'all');
                });
            });
            
            // If no folders to show
            if (folderView.children.length === 0) {
                folderView.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <div class="empty-state-icon">
                            <i class="fas fa-folder-open"></i>
                        </div>
                        <h3 class="empty-state-title">Tidak ada folder</h3>
                        <p class="empty-state-desc">Belum ada produk yang tersedia. Klik tombol Refresh untuk memuat produk.</p>
                        <button onclick="syncProducts()" class="sync-btn" style="margin-top: 1rem;">
                            <i class="fas fa-sync-alt"></i> Refresh Produk
                        </button>
                    </div>
                `;
            }
        }

        // ==================== MODIFIKASI FUNGSI RENDER SUBFOLDER VIEW ====================
        function renderSubfolderView(folderKey, subfolderKey = 'all') {
            const folder = PRODUCT_FOLDERS[folderKey];
            if (!folder) return;
            
            const folderView = document.getElementById('folderView');
            const subfolderView = document.getElementById('subfolderView');
            const allProductsView = document.getElementById('allProductsView');
            
            // Set view state
            currentView = 'subfolder';
            currentFolder = folderKey;
            currentSubfolder = subfolderKey;
            
            folderView.style.display = 'none';
            subfolderView.style.display = 'block';
            allProductsView.style.display = 'none';
            
            // Get folder icon
            const folderIcon = getFolderIcon(folderKey);
            
            // Update header
            const folderTitle = document.getElementById('folderTitle');
            const folderIconEl = document.getElementById('folderIcon');
            const folderDesc = document.getElementById('currentFolderDesc');
            const breadcrumb = document.getElementById('currentBreadcrumb');
            const addProductBtn = document.getElementById('addProductBtn');
            
            if (folderTitle) folderTitle.textContent = folder.name;
            if (folderIconEl) folderIconEl.innerHTML = folderIcon.html + ' ';
            if (folderDesc) folderDesc.textContent = folder.description;
            
            // Show/hide add product button
            if (addProductBtn) {
                if (isAdminMode && subfolderKey !== 'all') {
                    addProductBtn.style.display = 'block';
                } else {
                    addProductBtn.style.display = 'none';
                }
            }
            
            // Update breadcrumb
            const breadcrumbContainer = document.getElementById('breadcrumb');
            if (breadcrumbContainer) {
                if (subfolderKey === 'all') {
                    breadcrumb.textContent = 'Semua Produk';
                    breadcrumbContainer.innerHTML = `
                        <span class="breadcrumb-item" data-action="show-all">Semua Folder</span>
                        <span class="breadcrumb-separator"></span>
                        <span class="breadcrumb-current">${folder.name}</span>
                    `;
                } else {
                    const subfolder = folder.subfolders[subfolderKey];
                    if (subfolder) {
                        const subfolderIcon = getSubfolderIcon(folderKey, subfolderKey);
                        breadcrumb.textContent = subfolder.name;
                        breadcrumbContainer.innerHTML = `
                            <span class="breadcrumb-item" data-action="show-all">Semua Folder</span>
                            <span class="breadcrumb-separator"></span>
                            <span class="breadcrumb-current">${subfolderIcon.html} ${subfolder.name}</span>
                        `;
                    }
                }
            }
            
            // Render products
            const productGrid = document.getElementById('subfolderProductGrid');
            productGrid.innerHTML = '';
            
            let productsToShow = [];
            
            if (subfolderKey === 'all') {
                // Show all products in this folder
                for (const subKey in folder.subfolders) {
                    productsToShow = productsToShow.concat(folder.subfolders[subKey].products.map(p => ({
                        ...p,
                        subfolderName: folder.subfolders[subKey].name,
                        subfolderIcon: getSubfolderIcon(folderKey, subKey).html,
                        folderKey: folderKey,
                        subfolderKey: subKey
                    })));
                }
            } else {
                // Show products in specific subfolder
                const subfolder = folder.subfolders[subfolderKey];
                if (subfolder) {
                    const subfolderIcon = getSubfolderIcon(folderKey, subfolderKey);
                    productsToShow = subfolder.products.map(p => ({
                        ...p,
                        subfolderName: subfolder.name,
                        subfolderIcon: subfolderIcon.html,
                        folderKey: folderKey,
                        subfolderKey: subfolderKey
                    }));
                }
            }
            
            // Render each product
            productsToShow.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'subfolder-product-card';
                
                // Add edit buttons if in edit mode
                let editButtons = '';
                if (isEditMode && isAdminMode) {
                    editButtons = `
                        <div class="product-edit-btns">
                            <button class="edit-icon-btn edit" onclick="editProduct(${product.id}, '${product.folderKey}', '${product.subfolderKey}')" title="Edit Produk">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="edit-icon-btn delete" onclick="confirmDeleteProduct(${product.id}, '${product.folderKey}', '${product.subfolderKey}')" title="Hapus Produk">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                }
                
                productCard.innerHTML = `
                    ${editButtons}
                    <div class="subfolder-product-content">
                        <div class="subfolder-product-badge">
                            ${product.subfolderIcon} ${product.subfolderName}
                        </div>
                        <h3 class="subfolder-product-name">${product.name}</h3>
                        <div class="subfolder-product-price">Rp ${product.price.toLocaleString('id-ID')}</div>
                        <p class="subfolder-product-desc">${product.description}</p>
                        <div class="subfolder-product-actions">
                            <button class="btn btn-detail" onclick="showProductDetail(${product.id})">
                                <i class="fas fa-eye"></i> Detail
                            </button>
                            <button class="btn btn-buy" data-product-id="${product.id}">
                                <i class="fas fa-shopping-cart"></i> Beli
                            </button>
                        </div>
                    </div>
                `;
                
                productGrid.appendChild(productCard);
            });
            
            // Add event listeners to buy buttons
            document.querySelectorAll('.subfolder-product-actions .btn-buy').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-product-id'));
                    handleBuyClick(productId);
                });
            });
            
            // If no products
            if (productsToShow.length === 0) {
                productGrid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <div class="empty-state-icon">
                            <i class="fas fa-box-open"></i>
                        </div>
                        <h3 class="empty-state-title">Tidak ada produk</h3>
                        <p class="empty-state-desc">Belum ada produk di kategori ini.</p>
                        <button onclick="renderFolderView()" class="sync-btn" style="margin-top: 1rem;">
                            <i class="fas fa-arrow-left"></i> Kembali ke Folder
                        </button>
                        ${isAdminMode ? `
                            <button onclick="openAddProductModal()" class="sync-btn edit-btn add" style="margin-top: 1rem; background: linear-gradient(to right, var(--success), #28a745);">
                                <i class="fas fa-plus"></i> Tambah Produk Pertama
                            </button>
                        ` : ''}
                    </div>
                `;
            }
            
            // Add breadcrumb event listeners
            document.querySelectorAll('.breadcrumb-item').forEach(item => {
                item.addEventListener('click', function() {
                    const action = this.dataset.action;
                    if (action === 'show-all') {
                        renderFolderView();
                    }
                });
            });
        }

        // ==================== FUNGSI CRUD FOLDER ====================
        function openAddFolderModal(editKey = null) {
            if (!isAdminMode) {
                showNotification("Harus masuk admin mode terlebih dahulu!", "error");
                return;
            }
            
            const modal = document.getElementById('folderModal');
            const title = document.getElementById('folderModalTitle');
            const form = document.getElementById('folderForm');
            
            if (editKey) {
                // Edit mode
                title.textContent = "Edit Folder";
                const folder = PRODUCT_FOLDERS[editKey];
                const iconConfig = STORE_CONFIG.customIcons.folderIcons[editKey] || {
                    emoji: "",
                    fontAwesome: "fas fa-folder",
                    color: "#6a11cb",
                    type: "emoji"
                };
                
                document.getElementById('folderKey').value = editKey;
                document.getElementById('folderKey').disabled = true;
                document.getElementById('folderName').value = folder.name;
                document.getElementById('folderDescription').value = folder.description;
                document.getElementById('folderIconType').value = iconConfig.type || "emoji";
                document.getElementById('folderIconEmoji').value = iconConfig.emoji || "";
                document.getElementById('folderIconFontAwesome').value = iconConfig.fontAwesome || "fas fa-folder";
                document.getElementById('folderColor').value = iconConfig.color || "#6a11cb";
                
                // Show/hide icon fields based on type
                toggleIconFields(iconConfig.type || "emoji");
            } else {
                // Add mode
                title.textContent = "Tambah Folder Baru";
                form.reset();
                document.getElementById('folderKey').disabled = false;
                document.getElementById('folderIconEmoji').value = "";
                document.getElementById('folderIconFontAwesome').value = "fas fa-folder";
                document.getElementById('folderColor').value = "#6a11cb";
                toggleIconFields("emoji");
            }
            
            modal.style.display = 'flex';
            
            // Setup event listeners
            document.getElementById('folderModalClose').onclick = function() {
                modal.style.display = 'none';
            };
            
            // Icon type change handler
            document.getElementById('folderIconType').addEventListener('change', function() {
                toggleIconFields(this.value);
            });
            
            // Form submit handler
            form.onsubmit = function(e) {
                e.preventDefault();
                saveFolder(editKey);
            };
        }

        function toggleIconFields(type) {
            const emojiGroup = document.getElementById('folderIconEmoji').parentElement;
            const faGroup = document.getElementById('folderIconFontAwesomeGroup');
            
            if (type === 'emoji') {
                emojiGroup.style.display = 'block';
                faGroup.style.display = 'none';
            } else {
                emojiGroup.style.display = 'none';
                faGroup.style.display = 'block';
            }
        }

        function saveFolder(editKey = null) {
            const folderKey = document.getElementById('folderKey').value.trim().toLowerCase();
            const folderName = document.getElementById('folderName').value.trim();
            const folderDescription = document.getElementById('folderDescription').value.trim();
            const iconType = document.getElementById('folderIconType').value;
            const iconEmoji = document.getElementById('folderIconEmoji').value.trim();
            const iconFontAwesome = document.getElementById('folderIconFontAwesome').value.trim();
            const folderColor = document.getElementById('folderColor').value;
            
            // Validation
            if (!folderKey || !folderName) {
                showNotification("Harap isi kode dan nama folder!", "error");
                return;
            }
            
            if (!/^[a-z0-9_]+$/.test(folderKey)) {
                showNotification("Kode folder hanya boleh huruf kecil, angka, dan underscore!", "error");
                return;
            }
            
            // Check if key already exists (for new folder only)
            if (!editKey && PRODUCT_FOLDERS[folderKey]) {
                showNotification("Kode folder sudah ada! Gunakan kode yang berbeda.", "error");
                return;
            }
            
            // Save folder data
            if (editKey && editKey !== folderKey) {
                // Rename folder key
                const temp = PRODUCT_FOLDERS[editKey];
                delete PRODUCT_FOLDERS[editKey];
                PRODUCT_FOLDERS[folderKey] = temp;
            } else if (!editKey) {
                // Create new folder
                PRODUCT_FOLDERS[folderKey] = {
                    name: folderName,
                    description: folderDescription,
                    subfolders: {}
                };
            } else {
                // Update existing folder
                PRODUCT_FOLDERS[folderKey].name = folderName;
                PRODUCT_FOLDERS[folderKey].description = folderDescription;
            }
            
            // Save icon configuration
            if (!STORE_CONFIG.customIcons.folderIcons[folderKey]) {
                STORE_CONFIG.customIcons.folderIcons[folderKey] = {};
            }
            
            STORE_CONFIG.customIcons.folderIcons[folderKey].emoji = iconEmoji;
            STORE_CONFIG.customIcons.folderIcons[folderKey].fontAwesome = iconFontAwesome;
            STORE_CONFIG.customIcons.folderIcons[folderKey].color = folderColor;
            STORE_CONFIG.customIcons.folderIcons[folderKey].type = iconType;
            
            // Save to localStorage
            localStorage.setItem('zarrstore_products_folders', JSON.stringify(PRODUCT_FOLDERS));
            localStorage.setItem('zarrstore_icon_config', JSON.stringify(STORE_CONFIG.customIcons));
            
            // Close modal and update UI
            document.getElementById('folderModal').style.display = 'none';
            renderFolderView();
            
            showNotification(`Folder "${folderName}" berhasil ${editKey ? 'diperbarui' : 'ditambahkan'}!`, "success");
        }

        function editFolder(folderKey) {
            if (!isAdminMode) {
                showNotification("Harus masuk admin mode terlebih dahulu!", "error");
                return;
            }
            openAddFolderModal(folderKey);
        }

        function confirmDeleteFolder(folderKey) {
            if (!isAdminMode) {
                showNotification("Harus masuk admin mode terlebih dahulu!", "error");
                return;
            }
            
            const folder = PRODUCT_FOLDERS[folderKey];
            if (!folder) return;
            
            // Count total products in folder
            let totalProducts = 0;
            for (const subfolderKey in folder.subfolders) {
                totalProducts += folder.subfolders[subfolderKey].products.length;
            }
            
            deleteType = 'folder';
            deleteData = { folderKey: folderKey };
            
            const modal = document.getElementById('deleteConfirmModal');
            const title = document.getElementById('deleteConfirmTitle');
            const message = document.getElementById('deleteConfirmMessage');
            
            title.textContent = "Hapus Folder";
            message.innerHTML = `
                Apakah Anda yakin ingin menghapus folder <strong>"${folder.name}"</strong>?<br><br>
                <span style="color: var(--danger);">
                    <i class="fas fa-exclamation-triangle"></i> Peringatan: Aksi ini akan menghapus:<br>
                     ${Object.keys(folder.subfolders).length} subfolder<br>
                     ${totalProducts} produk<br>
                    <strong>Aksi ini tidak dapat dibatalkan!</strong>
                </span>
            `;
            
            modal.style.display = 'flex';
            
            // Setup event listeners
            document.getElementById('confirmDeleteBtn').onclick = function() {
                deleteFolder(folderKey);
                modal.style.display = 'none';
            };
            
            document.getElementById('cancelDeleteBtn').onclick = function() {
                modal.style.display = 'none';
            };
            
            modal.onclick = function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            };
        }

        function deleteFolder(folderKey) {
            delete PRODUCT_FOLDERS[folderKey];
            
            // Remove icon config
            if (STORE_CONFIG.customIcons.folderIcons[folderKey]) {
                delete STORE_CONFIG.customIcons.folderIcons[folderKey];
            }
            
            // Save to localStorage
            localStorage.setItem('zarrstore_products_folders', JSON.stringify(PRODUCT_FOLDERS));
            localStorage.setItem('zarrstore_icon_config', JSON.stringify(STORE_CONFIG.customIcons));
            
            // Update UI
            renderFolderView();
            showNotification(`Folder berhasil dihapus!`, "success");
        }

        // ==================== FUNGSI CRUD SUBFOLDER ====================
        function openAddSubfolderModal(folderKey, editSubfolderKey = null) {
            if (!isAdminMode) {
                showNotification("Harus masuk admin mode terlebih dahulu!", "error");
                return;
            }
            
            const modal = document.getElementById('productModal');
            const title = document.getElementById('productModalTitle');
            const form = document.getElementById('productForm');
            
            title.textContent = editSubfolderKey ? "Edit Subfolder" : "Tambah Subfolder Baru";
            form.reset();
            
            // Populate folder dropdown
            const folderSelect = document.getElementById('productFolder');
            folderSelect.innerHTML = '<option value="">Pilih Folder</option>';
            for (const key in PRODUCT_FOLDERS) {
                const folder = PRODUCT_FOLDERS[key];
                const selected = key === folderKey ? 'selected' : '';
                folderSelect.innerHTML += `<option value="${key}" ${selected}>${folder.name}</option>`;
            }
            
            folderSelect.disabled = !!editSubfolderKey;
            
            // Populate subfolder dropdown
            updateSubfolderOptions();
            
            if (editSubfolderKey) {
                document.getElementById('productSubfolder').value = editSubfolderKey;
                document.getElementById('productSubfolder').disabled = true;
                
                const subfolder = PRODUCT_FOLDERS[folderKey].subfolders[editSubfolderKey];
                if (subfolder) {
                    document.getElementById('newSubfolderName').value = subfolder.name;
                    document.getElementById('newSubfolderKey').value = editSubfolderKey;
                }
            }
            
            // Hide product fields
            document.querySelectorAll('#productForm .form-group').forEach(group => {
                if (!group.querySelector('#productFolder') && 
                    !group.querySelector('#productSubfolder') &&
                    !group.querySelector('#newSubfolderName') &&
                    !group.querySelector('#newSubfolderKey')) {
                    group.style.display = 'none';
                }
            });
            
            // Show new subfolder group
            document.getElementById('newSubfolderGroup').style.display = 'block';
            document.getElementById('newSubfolderName').required = true;
            document.getElementById('newSubfolderKey').required = true;
            
            modal.style.display = 'flex';
            
            // Setup event listeners
            document.getElementById('productModalClose').onclick = function() {
                modal.style.display = 'none';
                resetProductModal();
            };
            
            // Form submit handler
            form.onsubmit = function(e) {
                e.preventDefault();
                saveSubfolder(folderKey, editSubfolderKey);
            };
        }

        function updateSubfolderOptions() {
            const folderKey = document.getElementById('productFolder').value;
            const subfolderSelect = document.getElementById('productSubfolder');
            
            subfolderSelect.innerHTML = '<option value="">Pilih Subfolder</option>';
            
            if (folderKey && PRODUCT_FOLDERS[folderKey]) {
                const folder = PRODUCT_FOLDERS[folderKey];
                for (const key in folder.subfolders) {
                    subfolderSelect.innerHTML += `<option value="${key}">${folder.subfolders[key].name}</option>`;
                }
            }
            
            subfolderSelect.innerHTML += '<option value="new">+ Buat Subfolder Baru</option>';
        }

        function saveSubfolder(folderKey, editSubfolderKey = null) {
            const newSubfolderKey = document.getElementById('newSubfolderKey').value.trim().toLowerCase();
            const newSubfolderName = document.getElementById('newSubfolderName').value.trim();
            
            // Validation
            if (!newSubfolderKey || !newSubfolderName) {
                showNotification("Harap isi kode dan nama subfolder!", "error");
                return;
            }
            
            if (!/^[a-z0-9_]+$/.test(newSubfolderKey)) {
                showNotification("Kode subfolder hanya boleh huruf kecil, angka, dan underscore!", "error");
                return;
            }
            
            const folder = PRODUCT_FOLDERS[folderKey];
            if (!folder) {
                showNotification("Folder tidak ditemukan!", "error");
                return;
            }
            
            if (editSubfolderKey && editSubfolderKey !== newSubfolderKey) {
                // Rename subfolder key
                const temp = folder.subfolders[editSubfolderKey];
                delete folder.subfolders[editSubfolderKey];
                folder.subfolders[newSubfolderKey] = temp;
                folder.subfolders[newSubfolderKey].name = newSubfolderName;
            } else if (!editSubfolderKey) {
                // Create new subfolder
                if (folder.subfolders[newSubfolderKey]) {
                    showNotification("Subfolder dengan kode ini sudah ada!", "error");
                    return;
                }
                folder.subfolders[newSubfolderKey] = {
                    name: newSubfolderName,
                    products: []
                };
            } else {
                // Update existing subfolder
                folder.subfolders[editSubfolderKey].name = newSubfolderName;
            }
            
            // Save to localStorage
            localStorage.setItem('zarrstore_products_folders', JSON.stringify(PRODUCT_FOLDERS));
            
            // Close modal and update UI
            document.getElementById('productModal').style.display = 'none';
            resetProductModal();
            
            if (currentView === 'folders') {
                renderFolderView();
            } else if (currentView === 'subfolder' && currentFolder === folderKey) {
                renderSubfolderView(folderKey, currentSubfolder);
            }
            
            showNotification(`Subfolder "${newSubfolderName}" berhasil ${editSubfolderKey ? 'diperbarui' : 'ditambahkan'}!`, "success");
        }

        function editSubfolder(folderKey, subfolderKey) {
            if (!isAdminMode) {
                showNotification("Harus masuk admin mode terlebih dahulu!", "error");
                return;
            }
            openAddSubfolderModal(folderKey, subfolderKey);
        }

        function confirmDeleteSubfolder(folderKey, subfolderKey) {
            if (!isAdminMode) {
                showNotification("Harus masuk admin mode terlebih dahulu!", "error");
                return;
            }
            
            const folder = PRODUCT_FOLDERS[folderKey];
            const subfolder = folder?.subfolders[subfolderKey];
            if (!folder || !subfolder) return;
            
            deleteType = 'subfolder';
            deleteData = { folderKey: folderKey, subfolderKey: subfolderKey };
            
            const modal = document.getElementById('deleteConfirmModal');
            const title = document.getElementById('deleteConfirmTitle');
            const message = document.getElementById('deleteConfirmMessage');
            
            title.textContent = "Hapus Subfolder";
            message.innerHTML = `
                Apakah Anda yakin ingin menghapus subfolder <strong>"${subfolder.name}"</strong>?<br><br>
                <span style="color: var(--danger);">
                    <i class="fas fa-exclamation-triangle"></i> Peringatan: Aksi ini akan menghapus:<br>
                     ${subfolder.products.length} produk dalam subfolder ini<br>
                    <strong>Aksi ini tidak dapat dibatalkan!</strong>
                </span>
            `;
            
            modal.style.display = 'flex';
            
            // Setup event listeners
            document.getElementById('confirmDeleteBtn').onclick = function() {
                deleteSubfolder(folderKey, subfolderKey);
                modal.style.display = 'none';
            };
            
            document.getElementById('cancelDeleteBtn').onclick = function() {
                modal.style.display = 'none';
            };
            
            modal.onclick = function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            };
        }

        function deleteSubfolder(folderKey, subfolderKey) {
            const folder = PRODUCT_FOLDERS[folderKey];
            if (folder && folder.subfolders[subfolderKey]) {
                delete folder.subfolders[subfolderKey];
                
                // Save to localStorage
                localStorage.setItem('zarrstore_products_folders', JSON.stringify(PRODUCT_FOLDERS));
                
                // Update UI
                if (currentView === 'folders') {
                    renderFolderView();
                } else if (currentView === 'subfolder' && currentFolder === folderKey) {
                    if (currentSubfolder === subfolderKey) {
                        renderSubfolderView(folderKey, 'all');
                    } else {
                        renderSubfolderView(folderKey, currentSubfolder);
                    }
                }
                
                showNotification(`Subfolder berhasil dihapus!`, "success");
            }
        }

        // ==================== FUNGSI CRUD PRODUK ====================
        function openAddProductModal(editProductId = null, editFolderKey = null, editSubfolderKey = null) {
            if (!isAdminMode) {
                showNotification("Harus masuk admin mode terlebih dahulu!", "error");
                return;
            }
            
            const modal = document.getElementById('productModal');
            const title = document.getElementById('productModalTitle');
            const form = document.getElementById('productForm');
            
            title.textContent = editProductId ? "Edit Produk" : "Tambah Produk Baru";
            form.reset();
            
            // Show all form groups
            document.querySelectorAll('#productForm .form-group').forEach(group => {
                group.style.display = 'block';
            });
            
            // Hide new subfolder group by default
            document.getElementById('newSubfolderGroup').style.display = 'none';
            document.getElementById('newSubfolderName').required = false;
            document.getElementById('newSubfolderKey').required = false;
            
            // Populate folder dropdown
            const folderSelect = document.getElementById('productFolder');
            folderSelect.innerHTML = '<option value="">Pilih Folder</option>';
            for (const key in PRODUCT_FOLDERS) {
                const folder = PRODUCT_FOLDERS[key];
                const selected = (editFolderKey && key === editFolderKey) || (!editFolderKey && key === currentFolder) ? 'selected' : '';
                folderSelect.innerHTML += `<option value="${key}" ${selected}>${folder.name}</option>`;
            }
            
            // Populate subfolder dropdown
            updateSubfolderOptions();
            
            if (editProductId) {
                // Find product to edit
                let productToEdit = null;
                let foundFolderKey = null;
                let foundSubfolderKey = null;
                
                for (const fKey in PRODUCT_FOLDERS) {
                    const folder = PRODUCT_FOLDERS[fKey];
                    for (const sKey in folder.subfolders) {
                        const subfolder = folder.subfolders[sKey];
                        const product = subfolder.products.find(p => p.id === editProductId);
                        if (product) {
                            productToEdit = product;
                            foundFolderKey = fKey;
                            foundSubfolderKey = sKey;
                            break;
                        }
                    }
                    if (productToEdit) break;
                }
                
                if (productToEdit) {
                    // Set form values
                    document.getElementById('productFolder').value = foundFolderKey;
                    folderSelect.disabled = true;
                    
                    updateSubfolderOptions();
                    document.getElementById('productSubfolder').value = foundSubfolderKey;
                    document.getElementById('productSubfolder').disabled = true;
                    
                    document.getElementById('productName').value = productToEdit.name;
                    document.getElementById('productPrice').value = productToEdit.price;
                    document.getElementById('productDescription').value = productToEdit.description || '';
                    document.getElementById('productImage').value = productToEdit.image || '';
                }
            } else {
                // Default to current folder/subfolder if available
                if (currentFolder && currentSubfolder && currentSubfolder !== 'all') {
                    document.getElementById('productFolder').value = currentFolder;
                    updateSubfolderOptions();
                    document.getElementById('productSubfolder').value = currentSubfolder;
                }
                folderSelect.disabled = false;
                document.getElementById('productSubfolder').disabled = false;
            }
            
            modal.style.display = 'flex';
            
            // Setup event listeners
            document.getElementById('productModalClose').onclick = function() {
                modal.style.display = 'none';
                resetProductModal();
            };
            
            // Subfolder change handler
            document.getElementById('productSubfolder').addEventListener('change', function() {
                const newSubfolderGroup = document.getElementById('newSubfolderGroup');
                if (this.value === 'new') {
                    newSubfolderGroup.style.display = 'block';
                    document.getElementById('newSubfolderName').required = true;
                    document.getElementById('newSubfolderKey').required = true;
                } else {
                    newSubfolderGroup.style.display = 'none';
                    document.getElementById('newSubfolderName').required = false;
                    document.getElementById('newSubfolderKey').required = false;
                }
            });
            
            // Form submit handler
            form.onsubmit = function(e) {
                e.preventDefault();
                saveProduct(editProductId);
            };
        }

        function resetProductModal() {
            // Show all form groups
            document.querySelectorAll('#productForm .form-group').forEach(group => {
                group.style.display = 'block';
            });
            
            // Hide new subfolder group
            document.getElementById('newSubfolderGroup').style.display = 'none';
            document.getElementById('newSubfolderName').required = false;
            document.getElementById('newSubfolderKey').required = false;
            
            // Enable all inputs
            document.getElementById('productFolder').disabled = false;
            document.getElementById('productSubfolder').disabled = false;
        }

        function saveProduct(editProductId = null) {
            const folderKey = document.getElementById('productFolder').value;
            let subfolderKey = document.getElementById('productSubfolder').value;
            const productName = document.getElementById('productName').value.trim();
            const productPrice = parseInt(document.getElementById('productPrice').value);
            const productDescription = document.getElementById('productDescription').value.trim();
            const productImage = document.getElementById('productImage').value.trim();
            
            // Check if creating new subfolder
            if (subfolderKey === 'new') {
                const newSubfolderKey = document.getElementById('newSubfolderKey').value.trim().toLowerCase();
                const newSubfolderName = document.getElementById('newSubfolderName').value.trim();
                
                if (!newSubfolderKey || !newSubfolderName) {
                    showNotification("Harap isi kode dan nama subfolder baru!", "error");
                    return;
                }
                
                if (!/^[a-z0-9_]+$/.test(newSubfolderKey)) {
                    showNotification("Kode subfolder hanya boleh huruf kecil, angka, dan underscore!", "error");
                    return;
                }
                
                // Create new subfolder
                const folder = PRODUCT_FOLDERS[folderKey];
                if (!folder) {
                    showNotification("Folder tidak ditemukan!", "error");
                    return;
                }
                
                if (folder.subfolders[newSubfolderKey]) {
                    showNotification("Subfolder dengan kode ini sudah ada!", "error");
                    return;
                }
                
                folder.subfolders[newSubfolderKey] = {
                    name: newSubfolderName,
                    products: []
                };
                
                subfolderKey = newSubfolderKey;
            }
            
            // Validation
            if (!folderKey || !subfolderKey || !productName || !productPrice) {
                showNotification("Harap isi semua field yang wajib!", "error");
                return;
            }
            
            if (productPrice < 1000) {
                showNotification("Harga minimal Rp 1.000!", "error");
                return;
            }
            
            const folder = PRODUCT_FOLDERS[folderKey];
            const subfolder = folder?.subfolders[subfolderKey];
            if (!folder || !subfolder) {
                showNotification("Folder atau subfolder tidak ditemukan!", "error");
                return;
            }
            
            if (editProductId) {
                // Update existing product
                const productIndex = subfolder.products.findIndex(p => p.id === editProductId);
                if (productIndex !== -1) {
                    subfolder.products[productIndex] = {
                        id: editProductId,
                        name: productName,
                        price: productPrice,
                        description: productDescription,
                        image: productImage || undefined
                    };
                }
            } else {
                // Create new product
                // Generate new ID
                let newId = 1;
                const allProducts = getAllProducts();
                if (allProducts.length > 0) {
                    newId = Math.max(...allProducts.map(p => p.id)) + 1;
                }
                
                subfolder.products.push({
                    id: newId,
                    name: productName,
                    price: productPrice,
                    description: productDescription,
                    image: productImage || undefined
                });
            }
            
            // Save to localStorage
            localStorage.setItem('zarrstore_products_folders', JSON.stringify(PRODUCT_FOLDERS));
            
            // Close modal and update UI
            document.getElementById('productModal').style.display = 'none';
            resetProductModal();
            
            if (currentView === 'subfolder' && currentFolder === folderKey) {
                renderSubfolderView(folderKey, currentSubfolder);
            } else if (currentView === 'folders') {
                renderFolderView();
            }
            
            showNotification(`Produk "${productName}" berhasil ${editProductId ? 'diperbarui' : 'ditambahkan'}!`, "success");
        }

        function editProduct(productId, folderKey, subfolderKey) {
            if (!isAdminMode) {
                showNotification("Harus masuk admin mode terlebih dahulu!", "error");
                return;
            }
            openAddProductModal(productId, folderKey, subfolderKey);
        }

        function confirmDeleteProduct(productId, folderKey, subfolderKey) {
            if (!isAdminMode) {
                showNotification("Harus masuk admin mode terlebih dahulu!", "error");
                return;
            }
            
            const folder = PRODUCT_FOLDERS[folderKey];
            const subfolder = folder?.subfolders[subfolderKey];
            const product = subfolder?.products.find(p => p.id === productId);
            
            if (!product) return;
            
            deleteType = 'product';
            deleteData = { 
                productId: productId, 
                folderKey: folderKey, 
                subfolderKey: subfolderKey 
            };
            
            const modal = document.getElementById('deleteConfirmModal');
            const title = document.getElementById('deleteConfirmTitle');
            const message = document.getElementById('deleteConfirmMessage');
            
            title.textContent = "Hapus Produk";
            message.innerHTML = `
                Apakah Anda yakin ingin menghapus produk <strong>"${product.name}"</strong>?<br><br>
                <span style="color: var(--danger);">
                    <i class="fas fa-exclamation-triangle"></i> Peringatan:<br>
                    <strong>Aksi ini tidak dapat dibatalkan!</strong>
                </span>
            `;
            
            modal.style.display = 'flex';
            
            // Setup event listeners
            document.getElementById('confirmDeleteBtn').onclick = function() {
                deleteProduct(productId, folderKey, subfolderKey);
                modal.style.display = 'none';
            };
            
            document.getElementById('cancelDeleteBtn').onclick = function() {
                modal.style.display = 'none';
            };
            
            modal.onclick = function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            };
        }

        function deleteProduct(productId, folderKey, subfolderKey) {
            const folder = PRODUCT_FOLDERS[folderKey];
            const subfolder = folder?.subfolders[subfolderKey];
            
            if (subfolder) {
                const productIndex = subfolder.products.findIndex(p => p.id === productId);
                if (productIndex !== -1) {
                    subfolder.products.splice(productIndex, 1);
                    
                    // Save to localStorage
                    localStorage.setItem('zarrstore_products_folders', JSON.stringify(PRODUCT_FOLDERS));
                    
                    // Update UI
                    if (currentView === 'subfolder' && currentFolder === folderKey) {
                        renderSubfolderView(folderKey, currentSubfolder);
                    }
                    
                    showNotification(`Produk berhasil dihapus!`, "success");
                }
            }
        }

        // ==================== FUNGSI UNTUK UPDATE IKON SECARA REAL-TIME ====================
        function updateIconConfig(newConfig) {
            // Gabungkan konfigurasi baru dengan yang lama
            if (newConfig.folderIcons) {
                STORE_CONFIG.customIcons.folderIcons = {
                    ...STORE_CONFIG.customIcons.folderIcons,
                    ...newConfig.folderIcons
                };
            }
            
            if (newConfig.subfolderIcons) {
                STORE_CONFIG.customIcons.subfolderIcons = {
                    ...STORE_CONFIG.customIcons.subfolderIcons,
                    ...newConfig.subfolderIcons
                };
            }
            
            if (newConfig.settings) {
                STORE_CONFIG.customIcons.settings = {
                    ...STORE_CONFIG.customIcons.settings,
                    ...newConfig.settings
                };
            }
            
            // Simpan ke localStorage
            localStorage.setItem('zarrstore_icon_config', JSON.stringify(STORE_CONFIG.customIcons));
            
            // Update UI jika diperlukan
            if (currentView === 'folders') {
                renderFolderView();
            } else if (currentView === 'subfolder' && currentFolder) {
                renderSubfolderView(currentFolder, currentSubfolder);
            }
            
            showNotification('Konfigurasi ikon diperbarui!', 'success');
        }

        // ==================== FUNGSI UNTUK MENGUBAH JENIS IKON GLOBAL ====================
        function setGlobalIconType(type) {
            if (type !== 'emoji' && type !== 'fontawesome') {
                console.error('Jenis ikon harus "emoji" atau "fontawesome"');
                return;
            }
            
            STORE_CONFIG.customIcons.settings.defaultType = type;
            
            // Update semua konfigurasi ikon
            for (const key in STORE_CONFIG.customIcons.folderIcons) {
                STORE_CONFIG.customIcons.folderIcons[key].type = type;
            }
            
            for (const key in STORE_CONFIG.customIcons.subfolderIcons) {
                STORE_CONFIG.customIcons.subfolderIcons[key].type = type;
            }
            
            // Update UI
            if (currentView === 'folders') {
                renderFolderView();
            } else if (currentView === 'subfolder' && currentFolder) {
                renderSubfolderView(currentFolder, currentSubfolder);
            }
            
            showNotification(`Ikon diubah ke ${type === 'fontawesome' ? 'FontAwesome' : 'Emoji'}`, 'success');
        }

        // ==================== FUNGSI UNTUK LOAD KONFIGURASI IKON DARI LOCALSTORAGE ====================
        function loadIconConfig() {
            const savedConfig = localStorage.getItem('zarrstore_icon_config');
            if (savedConfig) {
                try {
                    const config = JSON.parse(savedConfig);
                    updateIconConfig(config);
                } catch (e) {
                    console.error('Error loading icon config:', e);
                }
            }
        }

        // ==================== CONTOH PENGGUNAAN UNTUK DEVELOPER ====================
        // Developer dapat memanggil fungsi ini untuk mengubah ikon secara dinamis
        function changeFolderIcon(folderKey, newIcon) {
            if (!STORE_CONFIG.customIcons.allowDeveloperOverride) return;
            
            // Contoh: Mengubah ikon folder game
            updateIconConfig({
                folderIcons: {
                    [folderKey]: newIcon
                }
            });
        }

        function changeSubfolderIcon(subfolderKey, newIcon) {
            if (!STORE_CONFIG.customIcons.allowDeveloperOverride) return;
            
            // Contoh: Mengubah ikon subfolder mobile_legends
            updateIconConfig({
                subfolderIcons: {
                    [subfolderKey]: newIcon
                }
            });
        }

        // ==================== VARIABEL FOLDER SYSTEM ====================
        let products = [];
        let currentProduct = null;
        let selectedPaymentMethod = null;
        let captchaVerified = false;
        let robotChecked = false;
        let storeStatusTimer = null;
        let currentView = 'folders'; // 'folders', 'subfolder', 'all'
        let currentFolder = null;
        let currentSubfolder = null;

        // ==================== SISTEM JAM OPERASIONAL ====================
        function initStoreHoursSystem() {
            updateStoreStatusBadge();
            storeStatusTimer = setInterval(updateStoreStatusBadge, 60000); // Update setiap 1 menit
            
            // Setup modal jam operasional
            setupStoreHoursModal();
            
            // Setup event listener untuk badge
            const badge = document.getElementById('storeHoursBadge');
            const icon = document.getElementById('storeHoursIcon');
            
            if (badge) {
                badge.addEventListener('click', openStoreHoursModal);
            }
            
            if (icon) {
                icon.addEventListener('click', openStoreHoursModal);
            }
            
            // Update daftar jam operasional di modal
            updateStoreHoursList();
        }

        function getStoreStatus() {
            const now = new Date();
            const currentDay = now.getDay(); // 0 = Minggu, 1 = Senin, ..., 6 = Sabtu
            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();
            const currentTimeInMinutes = currentHour * 60 + currentMinute;
            
            let openHour, closeHour;
            
            // Tentukan jam operasional berdasarkan hari
            if (currentDay === 5 || currentDay === 6) { // Jumat (5) & Sabtu (6)
                openHour = STORE_CONFIG.storeHours.weekend.open;
                closeHour = STORE_CONFIG.storeHours.weekend.close;
            } else { // Minggu - Kamis
                openHour = STORE_CONFIG.storeHours.regular.open;
                closeHour = STORE_CONFIG.storeHours.regular.close;
            }
            
            const openTimeInMinutes = openHour * 60;
            const closeTimeInMinutes = closeHour * 60;
            
            const isOpen = currentTimeInMinutes >= openTimeInMinutes && currentTimeInMinutes < closeTimeInMinutes;
            
            // Hitung waktu sampai status berubah
            let nextStatusChange = new Date(now);
            let timeUntilChange = 0;
            let nextStatus = isOpen ? 'tutup' : 'buka';
            
            if (isOpen) {
                // Hitung waktu sampai tutup
                nextStatusChange.setHours(closeHour, 0, 0, 0);
                timeUntilChange = nextStatusChange - now;
            } else {
                // Hitung waktu sampai buka
                if (currentTimeInMinutes >= closeTimeInMinutes) {
                    // Jika sudah lewat jam tutup, buka besok
                    nextStatusChange.setDate(nextStatusChange.getDate() + 1);
                }
                nextStatusChange.setHours(openHour, 0, 0, 0);
                timeUntilChange = nextStatusChange - now;
            }
            
            // Format waktu untuk display
            const hoursUntil = Math.floor(timeUntilChange / (1000 * 60 * 60));
            const minutesUntil = Math.floor((timeUntilChange % (1000 * 60 * 60)) / (1000 * 60));
            
            return {
                isOpen,
                nextStatusChange,
                nextStatus,
                hoursUntil,
                minutesUntil,
                openHour,
                closeHour,
                currentDay
            };
        }

        function updateStoreStatusBadge() {
            const status = getStoreStatus();
            const badge = document.getElementById('storeHoursBadge');
            const statusDot = document.getElementById('storeStatusDot');
            const statusText = document.getElementById('storeStatusText');
            const hoursText = document.getElementById('storeHoursText');
            
            if (!badge || !statusDot || !statusText || !hoursText) return;
            
            // Update status dot
            if (status.isOpen) {
                statusDot.className = 'store-status-dot open';
                statusText.className = 'store-status open';
                statusText.textContent = 'BUKA';
                badge.style.background = 'rgba(40, 167, 69, 0.1)';
                badge.style.borderColor = 'rgba(40, 167, 69, 0.3)';
            } else {
                statusDot.className = 'store-status-dot closed';
                statusText.className = 'store-status closed';
                statusText.textContent = 'TUTUP';
                badge.style.background = 'rgba(220, 53, 69, 0.1)';
                badge.style.borderColor = 'rgba(220, 53, 69, 0.3)';
            }
            
            // Update jam operasional text
            const dayNames = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
            const currentDayName = dayNames[status.currentDay];
            
            if (status.currentDay === 5 || status.currentDay === 6) { // Jumat & Sabtu
                hoursText.textContent = `${formatTime(status.openHour)}-${formatTime(status.closeHour)} ${STORE_CONFIG.storeHours.timezone}`;
            } else {
                hoursText.textContent = `${formatTime(status.openHour)}-${formatTime(status.closeHour)} ${STORE_CONFIG.storeHours.timezone}`;
            }
            
            // Tambah tooltip untuk detail
            badge.title = `Status: ${status.isOpen ? 'Buka' : 'Tutup'}\nKlik untuk detail jam operasional`;
        }

        function formatTime(hour) {
            return hour.toString().padStart(2, '0') + ':00';
        }

        function setupStoreHoursModal() {
            const modal = document.getElementById('storeHoursModal');
            const closeBtn = document.getElementById('storeHoursModalClose');
            
            if (closeBtn) {
                closeBtn.addEventListener('click', function() {
                    modal.style.display = 'none';
                });
            }
            
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }

        function openStoreHoursModal() {
            const modal = document.getElementById('storeHoursModal');
            const status = getStoreStatus();
            
            // Update informasi status saat ini di modal
            const currentStatus = document.getElementById('modalCurrentStatus');
            const currentTime = document.getElementById('modalCurrentTime');
            const nextChange = document.getElementById('modalNextChange');
            
            if (currentStatus && currentTime && nextChange) {
                currentStatus.textContent = status.isOpen ? 'BUKA' : 'TUTUP';
                currentStatus.style.color = status.isOpen ? 'var(--success)' : 'var(--danger)';
                
                const now = new Date();
                const dayNames = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
                const dayName = dayNames[now.getDay()];
                const timeString = now.toLocaleTimeString('id-ID', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: false 
                });
                
                currentTime.textContent = `${dayName}, ${timeString} ${STORE_CONFIG.storeHours.timezone}`;
                
                if (status.isOpen) {
                    nextChange.textContent = `Tutup pukul ${formatTime(status.closeHour)} ${STORE_CONFIG.storeHours.timezone} (${status.hoursUntil} jam ${status.minutesUntil} menit lagi)`;
                } else {
                    nextChange.textContent = `Buka pukul ${formatTime(status.openHour)} ${STORE_CONFIG.storeHours.timezone} (${status.hoursUntil} jam ${status.minutesUntil} menit lagi)`;
                }
            }
            
            modal.style.display = 'flex';
        }

        function updateStoreHoursList() {
            const list = document.getElementById('storeHoursList');
            if (!list) return;
            
            const dayNames = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
            const now = new Date();
            const currentDay = now.getDay();
            
            list.innerHTML = '';
            
            dayNames.forEach((dayName, index) => {
                let openHour, closeHour;
                
                if (index === 5 || index === 6) { // Jumat & Sabtu
                    openHour = STORE_CONFIG.storeHours.weekend.open;
                    closeHour = STORE_CONFIG.storeHours.weekend.close;
                } else { // Minggu - Kamis
                    openHour = STORE_CONFIG.storeHours.regular.open;
                    closeHour = STORE_CONFIG.storeHours.regular.close;
                }
                
                const item = document.createElement('div');
                item.className = `store-hours-item ${index === currentDay ? 'today' : ''}`;
                
                item.innerHTML = `
                    <div class="store-hours-day">${dayName}</div>
                    <div class="store-hours-time">${formatTime(openHour)} - ${formatTime(closeHour)} ${STORE_CONFIG.storeHours.timezone}</div>
                `;
                
                list.appendChild(item);
            });
        }

        // ==================== DAFTAR PLATFORM HOSTING GAMBAR YANG DIDUKUNG ====================
        const SUPPORTED_IMAGE_PLATFORMS = [
            'termai.com', 'term.ai', 'kirim.ee', 'geekhost.id', 'singkat.my.id',
            'catbox.moe', 'pomf.cat', 'litterbox.catbox.moe', 'imgur.com',
            'cdn.discordapp.com', 'telegra.ph', 'lh3.googleusercontent.com',
            'instagram.com', 'dropbox.com', 'postimg.cc', 'ibb.co',
            'githubusercontent.com', 'cloudinary.com', 'bit.ly', 'tinyurl.com',
            'files.catbox.moe', 'i.postimg.cc', 'i.imgur.com', 'drive.google.com'
        ];

        // ==================== FUNGSI VALIDASI LINK GAMBAR ====================
        function isValidImageUrl(url) {
            if (!url || typeof url !== 'string') return false;
            
            if (!url.toLowerCase().startsWith('http://') && !url.toLowerCase().startsWith('https://')) {
                return false;
            }
            
            const imageExtensions = [
                '.jpg', '.jpeg', '.png', '.gif', '.webp', '.bmp', '.svg',
                '.jfif', '.pjpeg', '.pjp', '.apng', '.avif', '.tiff', '.tif'
            ];
            
            const imagePatterns = [
                'image/', 'img/', 'photo/', 'picture/', 'foto/', 'gambar/',
                'thumbnail', 'preview', 'display', 'media', 'asset', 'content'
            ];
            
            const urlLower = url.toLowerCase();
            
            for (const ext of imageExtensions) {
                if (urlLower.includes(ext)) {
                    return true;
                }
            }
            
            for (const pattern of imagePatterns) {
                if (urlLower.includes(pattern)) {
                    return true;
                }
            }
            
            for (const platform of SUPPORTED_IMAGE_PLATFORMS) {
                if (urlLower.includes(platform.toLowerCase())) {
                    return true;
                }
            }
            
            if (urlLower.includes('/img/') || urlLower.includes('/image/') || 
                urlLower.includes('/media/') || urlLower.includes('/assets/') ||
                urlLower.includes('/uploads/') || urlLower.includes('/files/') ||
                urlLower.includes('/storage/') || urlLower.includes('/p/')) {
                return true;
            }
            
            const blockedPatterns = [
                '.html', '.php', '.asp', '.aspx', '.jsp', '.do', '.action',
                '/video/', '/audio/', '/file/', '/download/', '.pdf', '.doc',
                '.docx', '.xls', '.xlsx', '.zip', '.rar', '.7z', '.tar',
                '.mp4', '.mp3', '.avi', '.mkv', '.mov', '.wmv'
            ];
            
            for (const blocked of blockedPatterns) {
                if (urlLower.includes(blocked)) {
                    return false;
                }
            }
            
            return true;
        }

        // ==================== FUNGSI FALLBACK IMAGE HANDLER ====================
        function handleImageError(imgElement, product) {
            console.warn(`Gambar gagal dimuat: ${imgElement.src}`);
            
            if (imgElement.src.includes('via.placeholder.com')) {
                const originalUrl = imgElement.src;
                const newSizeUrl = originalUrl.replace('/300/', '/150/');
                if (newSizeUrl !== originalUrl) {
                    imgElement.src = newSizeUrl;
                    return;
                }
            }
            
            let color = '6a11cb';
            if (product.category === 'game') color = '2575fc';
            if (product.category === 'pulsa') color = '00AA13';
            if (product.category === 'kuota') color = 'FF6B00';
            if (product.category === 'bot') color = 'ff4da6';
            if (product.category === 'editor') color = '4C2A86';
            
            const productName = encodeURIComponent(
                product.name.substring(0, 15).replace(/[^\w\s]/gi, '')
            );
            
            imgElement.src = `https://via.placeholder.com/150/${color}/FFFFFF?text=${productName}`;
            imgElement.style.objectFit = 'contain';
            imgElement.style.padding = '10px';
            imgElement.style.backgroundColor = `#${color}20`;
        }

        // ==================== FUNGSI GET PRODUCT IMAGE URL ====================
        function getProductImageUrl(product) {
            // First check if product has a specific image
            if (product.image && isValidImageUrl(product.image)) {
                return product.image;
            }
            
            // Default images based on category
            let color = '6a11cb';
            let icon = '';
            
            switch(product.category) {
                case 'game':
                    color = '2575fc';
                    icon = '';
                    break;
                case 'pulsa':
                    color = '00AA13';
                    icon = '';
                    break;
                case 'kuota':
                    color = 'FF6B00';
                    icon = '';
                    break;
                case 'bot':
                    color = 'ff4da6';
                    icon = '';
                    break;
                case 'editor':
                    color = '4C2A86';
                    icon = '';
                    break;
            }
            
            const productName = encodeURIComponent(
                product.name.substring(0, 12).replace(/[^\w\s]/gi, '')
            );
            
            return `https://via.placeholder.com/300/${color}/FFFFFF?text=${icon}+${productName}`;
        }

        // ==================== FUNGSI SETUP BANNER WELCOME ====================
        function setupWelcomeBanner() {
            const bannerImg = document.getElementById('welcomeBannerImg');
            const bannerTitle = document.getElementById('bannerTitle');
            const bannerSubtitle = document.getElementById('bannerSubtitle');
            
            if (bannerImg && bannerTitle && bannerSubtitle) {
                const bannerConfig = STORE_CONFIG.welcomeBanner;
                
                // Set gambar banner dengan validasi
                if (bannerConfig.imageUrl && isValidImageUrl(bannerConfig.imageUrl)) {
                    bannerImg.src = bannerConfig.imageUrl;
                    bannerImg.onerror = function() {
                        console.warn('Gambar banner gagal dimuat, menggunakan gambar default');
                        bannerImg.src = 'https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80';
                    };
                } else {
                    bannerImg.src = 'https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80';
                }
                
                // Set teks banner
                bannerTitle.textContent = bannerConfig.title || STORE_CONFIG.storeName;
                bannerSubtitle.textContent = bannerConfig.subtitle || 'Agen Konter Digital Yang Aman & Terpercaya';
                
                // Pastikan banner muncul di semua device
                const banner = document.getElementById('welcomeBanner');
                if (banner && bannerConfig.showOnAllDevices !== false) {
                    banner.style.display = 'flex';
                }
            }
        }

        // ==================== SISTEM VERIFIKASI CLOUDFLARE STYLE ====================
        let cloudflareVerification = {
            isVerifying: false,
            isVerified: false,
            progress: 0,
            timer: null
        };

        function setupCloudFlareVerification() {
            const startBtn = document.getElementById('startVerification');
            const progressBar = document.getElementById('cloudflareProgress');
            const statusEl = document.getElementById('captchaStatus');
            const verificationText = document.getElementById('verificationText');
            
            if (!startBtn) {
                console.error("Tombol verifikasi tidak ditemukan!");
                return;
            }
            
            function startVerification() {
                if (cloudflareVerification.isVerifying || cloudflareVerification.isVerified) return;
                
                cloudflareVerification.isVerifying = true;
                cloudflareVerification.progress = 0;
                
                startBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Memverifikasi...';
                startBtn.style.background = 'linear-gradient(135deg, #4a0ca8, #1c60d1)';
                startBtn.disabled = true;
                
                if (verificationText) {
                    verificationText.innerHTML = 'Melakukan verifikasi keamanan...';
                    verificationText.style.color = '#6a11cb';
                    verificationText.style.fontWeight = '600';
                }
                
                statusEl.innerHTML = '<i class="fas fa-sync-alt fa-spin"></i> Memulai verifikasi keamanan...';
                statusEl.style.opacity = '1';
                statusEl.style.transform = 'translateY(0)';
                statusEl.style.color = '#6c757d';
                statusEl.style.background = 'linear-gradient(135deg, #f8f9ff, #f0f4ff)';
                statusEl.style.border = '1px solid #d1e3ff';
                
                const startBtnHover = startBtn.querySelector('div');
                if (startBtnHover) {
                    startBtnHover.style.left = '100%';
                    setTimeout(() => {
                        startBtnHover.style.left = '-100%';
                    }, 500);
                }
                
                cloudflareVerification.timer = setInterval(() => {
                    const increment = Math.random() * 8 + 4;
                    cloudflareVerification.progress += increment;
                    
                    if (cloudflareVerification.progress > 100) {
                        cloudflareVerification.progress = 100;
                    }
                    
                    progressBar.style.width = cloudflareVerification.progress + '%';
                    
                    if (cloudflareVerification.progress < 25) {
                        statusEl.innerHTML = '<i class="fas fa-sync-alt fa-spin"></i> Inisialisasi sistem...';
                        if (verificationText) verificationText.innerHTML = 'Memuat modul keamanan...';
                    } else if (cloudflareVerification.progress < 50) {
                        statusEl.innerHTML = '<i class="fas fa-sync-alt fa-spin"></i> Memeriksa keamanan...';
                        if (verificationText) verificationText.innerHTML = 'Scanning sistem...';
                    } else if (cloudflareVerification.progress < 75) {
                        statusEl.innerHTML = '<i class="fas fa-sync-alt fa-spin"></i> Validasi data...';
                        if (verificationText) verificationText.innerHTML = 'Verifikasi identitas...';
                    } else if (cloudflareVerification.progress < 90) {
                        statusEl.innerHTML = '<i class="fas fa-sync-alt fa-spin"></i> Finalisasi...';
                        if (verificationText) verificationText.innerHTML = 'Menyelesaikan verifikasi...';
                    }
                    
                    if (cloudflareVerification.progress >= 100) {
                        clearInterval(cloudflareVerification.timer);
                        
                        setTimeout(() => {
                            completeVerification();
                        }, 600);
                    }
                }, 150);
            }
            
            function completeVerification() {
                cloudflareVerification.isVerifying = false;
                cloudflareVerification.isVerified = true;
                
                captchaVerified = true;
                
                startBtn.innerHTML = '<i class="fas fa-check-circle"></i> Terverifikasi';
                startBtn.style.background = 'linear-gradient(135deg, #00b09b, #96c93d)';
                startBtn.disabled = true;
                
                progressBar.style.background = 'linear-gradient(90deg, #00b09b, #96c93d)';
                progressBar.style.animation = 'none';
                
                if (verificationText) {
                    verificationText.innerHTML = '<span style="color:#00b09b;font-weight:600;"> Verifikasi berhasil</span>';
                    verificationText.style.color = '#00b09b';
                }
                
                statusEl.innerHTML = `
                    <div style="
                        background: #00b09b;
                        width: 24px;
                        height: 24px;
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        color: white;
                        animation: checkmark 0.5s ease;
                    ">
                        <i class="fas fa-check"></i>
                    </div>
                    <div>
                        <div style="font-weight: 600; color: #155724;">Verifikasi Berhasil!</div>
                        <div style="font-size: 0.85rem; color: #28a745;">Anda dapat melanjutkan proses pemesanan</div>
                    </div>
                `;
                statusEl.style.color = '#155724';
                statusEl.style.background = '#d4edda';
                statusEl.style.border = '1px solid #c3e6cb';
                
                updateSendButton();
                
                showNotification(' Verifikasi keamanan berhasil!', 'success');
                
                createConfettiEffect();
            }
            
            function createConfettiEffect() {
                const verificationBox = document.querySelector('.cloudflare-verification');
                if (!verificationBox) return;
                
                for (let i = 0; i < 15; i++) {
                    setTimeout(() => {
                        const confetti = document.createElement('div');
                        confetti.style.position = 'absolute';
                        confetti.style.width = '6px';
                        confetti.style.height = '6px';
                        confetti.style.background = ['#6a11cb', '#2575fc', '#00b09b', '#96c93d'][Math.floor(Math.random() * 4)];
                        confetti.style.borderRadius = '50%';
                        confetti.style.top = '50%';
                        confetti.style.left = '50%';
                        confetti.style.transform = 'translate(-50%, -50%)';
                        confetti.style.zIndex = '1';
                        confetti.style.opacity = '0';
                        
                        verificationBox.appendChild(confetti);
                        
                        const angle = Math.random() * Math.PI * 2;
                        const distance = 50 + Math.random() * 50;
                        const duration = 800 + Math.random() * 400;
                        
                        confetti.animate([
                            { 
                                opacity: 0,
                                transform: 'translate(-50%, -50%) scale(0)',
                                offset: 0 
                            },
                            { 
                                opacity: 1,
                                transform: `translate(-50%, -50%) scale(1)`,
                                offset: 0.1 
                            },
                            {
                                opacity: 1,
                                transform: `translate(${Math.cos(angle) * distance - 50}%, ${Math.sin(angle) * distance - 50}%) scale(0.5)`,
                                offset: 0.8
                            },
                            {
                                opacity: 0,
                                transform: `translate(${Math.cos(angle) * distance - 50}%, ${Math.sin(angle) * distance - 50}%) scale(0)`,
                                offset: 1
                            }
                        ], {
                            duration: duration,
                            easing: 'cubic-bezier(0.4, 0, 0.2, 1)'
                        });
                        
                        setTimeout(() => {
                            if (confetti.parentNode) {
                                confetti.remove();
                            }
                        }, duration);
                    }, i * 50);
                }
            }
            
            startBtn.addEventListener('click', startVerification);
            
            startBtn.addEventListener('mouseenter', function() {
                if (!cloudflareVerification.isVerifying && !cloudflareVerification.isVerified) {
                    this.style.transform = 'translateY(-3px)';
                    this.style.boxShadow = '0 8px 25px rgba(106, 17, 203, 0.35)';
                    
                    const hoverDiv = this.querySelector('div');
                    if (hoverDiv) {
                        hoverDiv.style.left = '100%';
                        setTimeout(() => {
                            hoverDiv.style.left = '-100%';
                        }, 1000);
                    }
                }
            });
            
            startBtn.addEventListener('mouseleave', function() {
                if (!cloudflareVerification.isVerifying && !cloudflareVerification.isVerified) {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = '0 6px 20px rgba(106, 17, 203, 0.25)';
                }
            });
            
            setTimeout(() => {
                if (!cloudflareVerification.isVerified && !cloudflareVerification.isVerifying) {
                    statusEl.innerHTML = `
                        <i class="fas fa-mouse-pointer" style="color: #6a11cb;"></i>
                        <div>
                            <div style="font-weight: 600; color: #6a11cb;">Klik "Mulai Verifikasi"</div>
                            <div style="font-size: 0.85rem; color: #6c757d;">untuk melanjutkan proses pemesanan</div>
                        </div>
                    `;
                    statusEl.style.opacity = '1';
                    statusEl.style.transform = 'translateY(0)';
                    statusEl.style.background = 'linear-gradient(135deg, #f8f9ff, #f0f4ff)';
                    statusEl.style.border = '1px solid #d1e3ff';
                    statusEl.style.animation = 'bounce 2s infinite';
                }
            }, 2000);
            
            window.cloudflareVerification = {
                start: startVerification,
                getStatus: () => cloudflareVerification.isVerified
            };
        }

        // ==================== FUNGSI UNTUK MENDAPATKAN SEMUA PRODUK ====================
        function getAllProducts() {
            let allProducts = [];
            
            for (const folderKey in PRODUCT_FOLDERS) {
                const folder = PRODUCT_FOLDERS[folderKey];
                
                for (const subfolderKey in folder.subfolders) {
                    const subfolder = folder.subfolders[subfolderKey];
                    
                    subfolder.products.forEach(product => {
                        allProducts.push({
                            ...product,
                            category: folderKey,
                            subcategory: subfolderKey,
                            folderName: folder.name,
                            subfolderName: subfolder.name,
                            folderIcon: getFolderIcon(folderKey).html,
                            subfolderIcon: getSubfolderIcon(folderKey, subfolderKey).html,
                            folderColor: getFolderIcon(folderKey).color
                        });
                    });
                }
            }
            
            return allProducts;
        }

        // ==================== FUNGSI LOAD PRODUK ====================
        function loadProductsForAllDevices() {
            console.log(" Loading produk dengan folder system...");
            
            // Load from localStorage if exists
            const savedFolders = localStorage.getItem('zarrstore_products_folders');
            if (savedFolders) {
                try {
                    PRODUCT_FOLDERS = JSON.parse(savedFolders);
                } catch (e) {
                    console.error("Error loading saved folders:", e);
                }
            }
            
            // Save to localStorage
            localStorage.setItem('zarrstore_products_folders', JSON.stringify(PRODUCT_FOLDERS));
            localStorage.setItem('zarrstore_last_update', Date.now().toString());
            
            console.log(` Folder system siap di SEMUA device!`);
            
            // Return all products for compatibility
            return getAllProducts();
        }

        // ==================== FUNGSI SYNC PRODUK ====================
        function syncProducts() {
            const syncBtn = document.getElementById('syncProductsBtn');
            if (syncBtn) {
                syncBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Refreshing...';
                syncBtn.disabled = true;
            }
            
            // Reset to default folders
            PRODUCT_FOLDERS = {
                game: {
                    name: "Top Up Game",
                    description: "Top up semua game favorit Anda",
                    subfolders: {
                        mobile_legends: {
                            name: "Mobile Legends",
                            products: [
                                { id: 1, name: "86 Diamond", price: 25000, description: "Diamond termurah" },
                                { id: 2, name: "172 Diamond", price: 50000, description: "Pilihan terpopuler" },
                                { id: 3, name: "257 Diamond", price: 75000, description: "Value terbaik" },
                                { id: 4, name: "344 Diamond", price: 100000, description: "Diamond banyak" },
                                { id: 5, name: "429 Diamond", price: 125000, description: "Untuk pro player" }
                            ]
                        },
                        free_fire: {
                            name: "Free Fire",
                            products: [
                                { id: 6, name: "100 Diamond", price: 30000, description: "Diamond FF" },
                                { id: 7, name: "210 Diamond", price: 60000, description: "Hemat 10%" },
                                { id: 8, name: "530 Diamond", price: 150000, description: "Best seller" },
                                { id: 9, name: "1060 Diamond", price: 300000, description: "Maximal" }
                            ]
                        }
                    }
                },
                
                pulsa: {
                    name: "Isi Pulsa",
                    description: "Pulsa semua operator 24 jam",
                    subfolders: {
                        telkomsel: {
                            name: "Telkomsel",
                            products: [
                                { id: 12, name: "Pulsa 5.000", price: 7000, description: "Reguler" },
                                { id: 13, name: "Pulsa 10.000", price: 12000, description: "Ekonomis" },
                                { id: 14, name: "Pulsa 25.000", price: 27000, description: "Best seller" }
                            ]
                        }
                    }
                },
                
                kuota: {
                    name: "Paket Kuota",
                    description: "Kuota internet murah",
                    subfolders: {
                        telkomsel_kuota: {
                            name: "Telkomsel",
                            products: [
                                { id: 22, name: "Kuota 1GB 7 Hari", price: 15000, description: "1GB 24 jam" },
                                { id: 23, name: "Kuota 3GB 30 Hari", price: 35000, description: "3GB malam" }
                            ]
                        }
                    }
                },
                
                bot: {
                    name: "Sewa Bot WhatsApp",
                    description: "Bot WA multifungsi premium",
                    subfolders: {
                        bot_basic: {
                            name: "Paket Basic",
                            products: [
                                { id: 27, name: "Sewa 1 Minggu", price: 15000, description: "Full fitur" },
                                { id: 28, name: "Sewa 1 Bulan", price: 50000, description: "Hemat 28%" }
                            ]
                        }
                    }
                },
                
                editor: {
                    name: "Aplikasi Premium",
                    description: "Aplikasi editor premium",
                    subfolders: {
                        video_editor: {
                            name: "Video Editor",
                            products: [
                                { id: 32, name: "Alight Motion Pro", price: 10000, description: "1 Tahun" },
                                { id: 33, name: "KineMaster Pro", price: 15000, description: "Lifetime" }
                            ]
                        }
                    }
                }
            };
            
            // Save to localStorage
            localStorage.setItem('zarrstore_products_folders', JSON.stringify(PRODUCT_FOLDERS));
            localStorage.setItem('zarrstore_last_update', Date.now().toString());
            
            // Update UI
            if (currentView === 'folders') {
                renderFolderView();
            } else if (currentView === 'subfolder' && currentFolder) {
                renderSubfolderView(currentFolder, currentSubfolder);
            }
            
            products = getAllProducts();
            if (products.length > 0) {
                currentProduct = products[0];
                updateOrderSummary(currentProduct);
            }
            
            showNotification(` Produk berhasil di-refresh!`, 'success');
            
            if (syncBtn) {
                setTimeout(() => {
                    syncBtn.innerHTML = '<i class="fas fa-sync-alt"></i> Refresh Produk';
                    syncBtn.disabled = false;
                }, 1000);
            }
        }

        // ==================== FUNGSI BANTUAN ====================
        function getCategoryName(category) {
            const names = { 
                game: 'Game', 
                pulsa: 'Pulsa', 
                kuota: 'Kuota',
                bot: 'Sewa Bot',
                editor: 'Apk Prem'
            };
            return names[category] || category;
        }

        function getCategoryClass(category) {
            const classes = {
                bot: 'category-bot',
                editor: 'category-editor'
            };
            return classes[category] || '';
        }

        // ==================== FUNGSI NOTIFIKASI ====================
        function showNotification(message, type) {
            const oldNotification = document.querySelector('.notification');
            if (oldNotification) {
                oldNotification.remove();
            }
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            let icon = 'fa-info-circle';
            if (type === 'success') icon = 'fa-check-circle';
            if (type === 'error') icon = 'fa-exclamation-circle';
            if (type === 'warning') icon = 'fa-exclamation-triangle';
            
            notification.innerHTML = `
                <i class="fas ${icon}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        }

        // ==================== HANDLE IMAGE ERROR GLOBAL ====================
        window.handleProductImageError = function(imgElement, productId) {
            const allProducts = getAllProducts();
            const product = allProducts.find(p => p.id === productId);
            if (product) {
                handleImageError(imgElement, product);
            }
        };

        // ==================== FUNGSI HANDLE BUY CLICK ====================
        function handleBuyClick(productId) {
            const storeStatus = getStoreStatus();
            
            if (!storeStatus.isOpen) {
                const nextOpenTime = formatTime(storeStatus.openHour);
                showNotification(` Toko sedang tutup. Buka kembali pukul ${nextOpenTime} ${STORE_CONFIG.storeHours.timezone}`, 'error');
                
                const dayNames = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
                const currentDayName = dayNames[storeStatus.currentDay];
                
                alert(`Toko ZarrStoreID saat ini tutup.\n\n Jam Operasional ${currentDayName}:\n${formatTime(storeStatus.openHour)} - ${formatTime(storeStatus.closeHour)} ${STORE_CONFIG.storeHours.timezone}\n\n Buka kembali dalam: ${storeStatus.hoursUntil} jam ${storeStatus.minutesUntil} menit\n\n Catatan: Pemesanan di luar jam operasional akan diproses pada hari berikutnya.`);
                return;
            }
            
            // Jika toko buka, lanjutkan dengan pembelian
            const allProducts = getAllProducts();
            const product = allProducts.find(p => p.id === productId);
            if (product) {
                currentProduct = product;
                updateOrderSummary(product);
                openOrderModal(product);
            }
        }

        // ==================== VERIFIKASI ROBOT ====================
        function setupRobotVerification() {
            const checkbox = document.getElementById('robotCheckbox');
            
            if (!checkbox) {
                console.error("Elemen robotCheckbox tidak ditemukan!");
                return;
            }
            
            checkbox.addEventListener('click', function() {
                robotChecked = !robotChecked;
                
                if (robotChecked) {
                    checkbox.classList.add('checked');
                } else {
                    checkbox.classList.remove('checked');
                }
                
                updateSendButton();
            });
        }

        function updateSendButton() {
            const sendButton = document.getElementById('sendWhatsApp');
            
            if (!sendButton) {
                console.error("Tombol sendWhatsApp tidak ditemukan!");
                return;
            }
            
            const isCloudFlareVerified = window.cloudflareVerification ? 
                window.cloudflareVerification.getStatus() : captchaVerified;
            
            if (robotChecked && isCloudFlareVerified) {
                sendButton.disabled = false;
                sendButton.innerHTML = '<i class="fab fa-whatsapp"></i> Kirim ke WhatsApp';
                sendButton.style.background = 'linear-gradient(to right, #25D366, #128C7E)';
                sendButton.style.boxShadow = '0 6px 20px rgba(37, 211, 102, 0.3)';
                sendButton.style.animation = 'pulse 2s infinite';
            } else {
                sendButton.disabled = true;
                sendButton.innerHTML = '<i class="fas fa-lock"></i> Selesaikan Verifikasi';
                sendButton.style.background = '#6c757d';
                sendButton.style.boxShadow = 'none';
                sendButton.style.animation = 'none';
            }
        }

        // ==================== BACK TO FOLDERS BUTTON ====================
        function setupBackButton() {
            const backBtn = document.getElementById('backToFolders');
            if (backBtn) {
                backBtn.addEventListener('click', function() {
                    renderFolderView();
                });
            }
        }

        // ==================== FUNGSI INISIALISASI ====================
        function initApp() {
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            console.log(" Inisialisasi ZarrStoreID dengan Folder System...");
            
            products = loadProductsForAllDevices();
            
            if (products.length > 0) {
                currentProduct = products[0];
            }
            
            setupWelcomeBanner();
            initStoreHoursSystem();
            setupNavigation();
            setupPayment();
            setupMobileMenu();
            setupOrderModal();
            setupCopyButtons();
            setupCollaborators();
            setupCloudFlareVerification();
            setupRobotVerification();
            setupBackButton();
            
            // Setup admin button
            document.getElementById('adminToggleBtn').addEventListener('click', toggleAdminMode);
            
            document.getElementById('syncProductsBtn').addEventListener('click', syncProducts);
            
            // Start with folder view
            renderFolderView();
            renderTransactionHistory();
            
            if (currentProduct) {
                updateOrderSummary(currentProduct);
            }
            
            loadQRISImage();
            
            // Load icon config
            loadIconConfig();
            
            setTimeout(() => {
                if (products.length === 0) {
                    console.log(" Produk kosong, emergency sync...");
                    syncProducts();
                }
            }, 2000);
            
            console.log(" ZarrStoreID dengan Folder System siap di SEMUA device!");
        }

        // ==================== FUNGSI COLLABORATOR ====================
        function setupCollaborators() {
            const container = document.getElementById('collaboratorsList');
            if (!container) return;
            
            container.innerHTML = '';
            
            const collaborators = [
                { name: "SabaMart" },
                { name: "AqilDevv" },
                { name: "Wanz Preset" },
                { name: "Vion Shizawa" },
                { name: "Mahiro Editz" },
                { name: "Suzza Preset" },
                { name: "Xyran" },
                { name: "ZAAR" },
                { name: "Zeedan Lee Natanael" },
                { name: "Keitha" }
            ];
            
            const shuffled = [...collaborators].sort(() => Math.random() - 0.5);
            
            shuffled.forEach(collab => {
                const supporter = document.createElement('div');
                supporter.className = 'supporter';
                supporter.textContent = collab.name;
                supporter.title = `Supporter ZarrStoreID: ${collab.name}`;
                supporter.style.cursor = 'default';
                
                container.appendChild(supporter);
            });
        }

        // ==================== FUNGSI UI ====================
        function setupNavigation() {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
                    document.getElementById(this.getAttribute('data-target')).classList.add('active');
                    document.getElementById('mainNav').classList.remove('active');
                    updateMobileMenuIcon();
                    
                    // Reset to folder view when clicking produk tab
                    if (this.getAttribute('data-target') === 'produk') {
                        renderFolderView();
                    }
                });
            });
        }

        function setupPayment() {
            document.querySelectorAll('.payment-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.payment-option').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedPaymentMethod = this.getAttribute('data-method');
                });
            });
        }

        function setupCopyButtons() {
            document.querySelectorAll('.payment-number').forEach(btn => {
                btn.addEventListener('click', function() {
                    const number = this.getAttribute('data-number');
                    navigator.clipboard.writeText(number).then(() => {
                        const notification = this.querySelector('.copy-notification');
                        notification.classList.add('show');
                        setTimeout(() => notification.classList.remove('show'), 2000);
                    }).catch(err => {
                        const textArea = document.createElement('textarea');
                        textArea.value = number;
                        document.body.appendChild(textArea);
                        textArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textArea);
                        
                        const notification = this.querySelector('.copy-notification');
                        notification.classList.add('show');
                        setTimeout(() => notification.classList.remove('show'), 2000);
                    });
                });
            });
        }

        function setupMobileMenu() {
            document.getElementById('mobileMenuBtn').addEventListener('click', function() {
                const nav = document.getElementById('mainNav');
                nav.classList.toggle('active');
                updateMobileMenuIcon();
            });
        }

        function updateMobileMenuIcon() {
            const nav = document.getElementById('mainNav');
            const icon = document.getElementById('mobileMenuBtn').querySelector('i');
            if (nav.classList.contains('active')) {
                icon.classList.remove('fa-bars');
                icon.classList.add('fa-times');
            } else {
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
            }
        }

        function setupOrderModal() {
            const modal = document.getElementById('orderModal');
            const modalClose = document.getElementById('modalClose');
            
            if (modalClose) {
                modalClose.addEventListener('click', function() {
                    modal.style.display = 'none';
                });
            }
            
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
            
            const sendButton = document.getElementById('sendWhatsApp');
            if (sendButton) {
                sendButton.addEventListener('click', function() {
                    if (currentProduct) {
                        sendOrderToWhatsApp(currentProduct);
                    }
                });
            }
            
            // Reset verifikasi ketika modal dibuka
            const modalObserver = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.attributeName === 'style') {
                        const displayValue = modal.style.display;
                        if (displayValue === 'flex') {
                            // Reset verifikasi state
                            cloudflareVerification.isVerifying = false;
                            cloudflareVerification.isVerified = false;
                            cloudflareVerification.progress = 0;
                            
                            if (cloudflareVerification.timer) {
                                clearInterval(cloudflareVerification.timer);
                            }
                            
                            // Reset UI
                            const startBtn = document.getElementById('startVerification');
                            if (startBtn) {
                                startBtn.innerHTML = '<i class="fas fa-shield-alt"></i> Mulai Verifikasi';
                                startBtn.style.background = 'linear-gradient(135deg, #6a11cb, #2575fc)';
                                startBtn.disabled = false;
                            }
                            
                            const progressBar = document.getElementById('cloudflareProgress');
                            if (progressBar) {
                                progressBar.style.width = '0%';
                                progressBar.style.background = 'linear-gradient(90deg, #6a11cb, #2575fc)';
                                progressBar.style.animation = 'progressShimmer 2s infinite linear';
                            }
                            
                            const statusEl = document.getElementById('captchaStatus');
                            if (statusEl) {
                                statusEl.innerHTML = '';
                                statusEl.style.opacity = '0';
                                statusEl.style.transform = 'translateY(-10px)';
                            }
                            
                            const verificationText = document.getElementById('verificationText');
                            if (verificationText) {
                                verificationText.innerHTML = 'Melakukan verifikasi...';
                                verificationText.style.color = '#6c757d';
                            }
                            
                            captchaVerified = false;
                            robotChecked = false;
                            
                            // Reset robot checkbox
                            const robotCheckbox = document.getElementById('robotCheckbox');
                            if (robotCheckbox) {
                                robotCheckbox.classList.remove('checked');
                            }
                            
                            updateSendButton();
                        }
                    }
                });
            });
            
            modalObserver.observe(modal, { attributes: true });
        }

        function openOrderModal(product) {
            const modal = document.getElementById('orderModal');
            const orderProduct = document.getElementById('orderProduct');
            const orderPrice = document.getElementById('orderPrice');
            
            if (orderProduct) orderProduct.value = product.name;
            if (orderPrice) orderPrice.value = `Rp ${product.price.toLocaleString('id-ID')}`;
            
            document.getElementById('customerName').value = '';
            document.getElementById('customerPhone').value = '';
            document.getElementById('gameId').value = '';
            document.getElementById('paymentMethod').value = '';
            document.getElementById('additionalNotes').value = '';
            
            modal.style.display = 'flex';
        }

        // ==================== FUNGSI BANTUAN LAINNYA ====================
        function loadQRISImage() {
            const qrisContainer = document.getElementById('qrisContainer');
            if (!qrisContainer || !STORE_CONFIG.qrisUrl) return;
            
            if (STORE_CONFIG.qrisUrl !== "https://files.catbox.moe/xxxxxx.png") {
                qrisContainer.innerHTML = `
                    <img src="${STORE_CONFIG.qrisUrl}" alt="QRIS ${STORE_CONFIG.storeName}" class="qr-image" onerror="handleQRISError()">
                    <p style="color: var(--success); margin-top: 10px;">
                        <i class="fas fa-check-circle"></i> QRIS aktif, scan untuk bayar
                    </p>
                `;
            }
        }

        function handleQRISError() {
            const qrisContainer = document.getElementById('qrisContainer');
            if (qrisContainer) {
                qrisContainer.innerHTML = `
                    <div style="padding: 2rem; background: #f9f9f9; border-radius: 10px;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 2rem; margin-bottom: 1rem; color: #ffc107;"></i>
                        <p>QRIS akan diaktifkan segera</p>
                        <p style="font-size: 0.9rem; margin-top: 10px;">Silakan pilih metode pembayaran lainnya</p>
                    </div>
                `;
            }
        }

        function updateOrderSummary(product) {
            if (!product) return;
            
            const productNameEl = document.getElementById('productName');
            const productPriceEl = document.getElementById('productPrice');
            const totalPriceEl = document.getElementById('totalPrice');
            
            if (productNameEl) productNameEl.textContent = product.name;
            if (productPriceEl) productPriceEl.textContent = `Rp ${product.price.toLocaleString('id-ID')}`;
            if (totalPriceEl) totalPriceEl.textContent = `Rp ${product.price.toLocaleString('id-ID')}`;
        }

        window.showProductDetail = function(id) {
            const allProducts = getAllProducts();
            const product = allProducts.find(p => p.id === id);
            if (product) {
                alert(`Detail Produk:\n\nNama: ${product.name}\nHarga: Rp ${product.price.toLocaleString('id-ID')}\nKategori: ${product.folderName}\nSubkategori: ${product.subfolderName}\nDeskripsi: ${product.description}`);
            }
        };

        function showQRISModal() {
            const modal = document.getElementById('orderModal');
            const modalContent = modal.querySelector('.modal-content');
            
            modalContent.innerHTML = `
                <button class="modal-close" id="modalClose">&times;</button>
                <h2 style="color: var(--primary); margin-bottom: 1.5rem;">Pembayaran QRIS</h2>
                <div style="text-align: center;">
                    <div style="background: white; padding: 1.5rem; border-radius: 15px; display: inline-block;">
                        <img src="${STORE_CONFIG.qrisUrl}" alt="QRIS ${STORE_CONFIG.storeName}" style="width: 250px; height: 250px; object-fit: contain; border: 1px solid #eee; border-radius: 10px;" onerror="this.src='https://via.placeholder.com/250/FF6B00/FFFFFF?text=QRIS+Error'">
                    </div>
                    <div style="margin-top: 2rem;">
                        <a href="https://wa.me/${STORE_CONFIG.phoneNumber}?text=Halo%20${encodeURIComponent(STORE_CONFIG.storeName)}%2C%20saya%20sudah%20bayar%20via%20QRIS%20untuk%20${encodeURIComponent(currentProduct.name)}" 
                           class="btn-whatsapp" target="_blank">
                            <i class="fab fa-whatsapp"></i> Kirim Bukti Bayar
                        </a>
                    </div>
                </div>
            `;
            
            modal.querySelector('#modalClose').onclick = function() {
                modal.style.display = 'none';
            };
            
            modal.style.display = 'flex';
        }

        function sendOrderToWhatsApp(product) {
            if (!robotChecked) {
                showNotification('Centang "Saya Bukan Robot" terlebih dahulu!', 'error');
                return;
            }
            
            const isCloudFlareVerified = window.cloudflareVerification ? 
                window.cloudflareVerification.getStatus() : captchaVerified;
            
            if (!isCloudFlareVerified) {
                showNotification('Verifikasi keamanan terlebih dahulu!', 'error');
                return;
            }
            
            const name = document.getElementById('customerName').value.trim();
            const phone = document.getElementById('customerPhone').value.trim();
            const gameId = document.getElementById('gameId').value.trim();
            const paymentMethod = document.getElementById('paymentMethod').value;
            const notes = document.getElementById('additionalNotes').value.trim();
            
            if (!name || !phone || !gameId || !paymentMethod) {
                showNotification('Lengkapi semua field wajib!', 'error');
                return;
            }
            
            const phoneRegex = /^[0-9]{10,13}$/;
            const cleanPhone = phone.replace(/[^0-9]/g, '');
            if (!phoneRegex.test(cleanPhone)) {
                showNotification('Nomor WhatsApp tidak valid!', 'error');
                return;
            }
            
            // Cek status toko sebelum mengirim pesanan
            const storeStatus = getStoreStatus();
            let storeStatusNote = '';
            
            if (!storeStatus.isOpen) {
                storeStatusNote = `\n *Status Toko:* Saat ini tutup (Buka pukul ${formatTime(storeStatus.openHour)} ${STORE_CONFIG.storeHours.timezone})\n   Pesanan akan diproses saat toko buka`;
            } else {
                storeStatusNote = `\n *Status Toko:* Buka (${formatTime(storeStatus.openHour)} - ${formatTime(storeStatus.closeHour)} ${STORE_CONFIG.storeHours.timezone})`;
            }
            
            const message = `Halo ${STORE_CONFIG.storeName}, saya ingin memesan:

 *Produk:* ${product.name}
 *Harga:* Rp ${product.price.toLocaleString('id-ID')}
 *Nama:* ${name}
 *WhatsApp:* ${phone}
 *ID Game/No HP:* ${gameId}
 *Metode Bayar:* ${paymentMethod}
${notes ? ` *Catatan:* ${notes}` : ''}
${storeStatusNote}

Jika sudah memesan melalui website. Silahkan Ketik *.payment* untuk melanjutkan pembayaram

*Note :*
Jangan Hapus Id Transaksi Ini!!`;
            
            const url = `https://wa.me/${STORE_CONFIG.phoneNumber}?text=${encodeURIComponent(message)}`;
            addTransactionHistory(product, name);
            document.getElementById('orderModal').style.display = 'none';
            
            setTimeout(() => {
                window.open(url, '_blank');
            }, 500);
            
            showNotification('Order berhasil! WhatsApp akan terbuka...', 'success');
        }

        function addTransactionHistory(product, customerName) {
            let history = JSON.parse(localStorage.getItem('zarrstore_history') || '[]');
            
            const newTransaction = {
                id: `TRX${String(history.length + 1).padStart(3, '0')}`,
                product: product.name,
                date: new Date().toISOString().split('T')[0],
                amount: product.price,
                customer: customerName,
                status: 'pending'
            };
            
            history.unshift(newTransaction);
            localStorage.setItem('zarrstore_history', JSON.stringify(history));
            renderTransactionHistory();
        }

        // ==================== FUNGSI BATALKAN PESANAN ====================
        function cancelOrder(transactionId) {
            if (confirm(`Apakah Anda yakin ingin membatalkan pesanan ${transactionId}?`)) {
                let history = JSON.parse(localStorage.getItem('zarrstore_history') || '[]');
                const transactionIndex = history.findIndex(t => t.id === transactionId);
                
                if (transactionIndex !== -1 && history[transactionIndex].status === 'pending') {
                    history[transactionIndex].status = 'cancelled';
                    localStorage.setItem('zarrstore_history', JSON.stringify(history));
                    renderTransactionHistory();
                    showNotification(`Pesanan ${transactionId} berhasil dibatalkan!`, 'success');
                } else if (history[transactionIndex].status === 'cancelled') {
                    showNotification('Pesanan ini sudah dibatalkan sebelumnya!', 'info');
                } else {
                    showNotification('Pesanan tidak dapat dibatalkan karena sudah diproses!', 'error');
                }
            }
        }

        function renderTransactionHistory() {
            const history = JSON.parse(localStorage.getItem('zarrstore_history') || '[]');
            const container = document.getElementById('historyTableBody');
            
            if (!container) return;
            
            container.innerHTML = '';
            
            history.slice(0, 10).forEach(transaction => {
                const row = document.createElement('tr');
                const statusClass = `status-${transaction.status}`;
                
                let statusText = '';
                switch(transaction.status) {
                    case 'completed': statusText = 'Selesai'; break;
                    case 'processing': statusText = 'Diproses'; break;
                    case 'cancelled': statusText = 'Dibatalkan'; break;
                    default: statusText = 'Menunggu';
                }
                
                let actionButtons = '';
                if (transaction.status === 'pending') {
                    actionButtons = `
                        <button class="action-btn cancel" onclick="cancelOrder('${transaction.id}')">
                            <i class="fas fa-times"></i> Batalkan
                        </button>
                    `;
                } else if (transaction.status === 'cancelled') {
                    actionButtons = `<span style="color: var(--gray); font-style: italic;">Dibatalkan</span>`;
                } else {
                    actionButtons = `<span style="color: var(--gray); font-style: italic;">-</span>`;
                }
                
                row.innerHTML = `
                    <td>${transaction.id}</td>
                    <td>${transaction.product}</td>
                    <td>${transaction.date}</td>
                    <td>Rp ${transaction.amount.toLocaleString('id-ID')}</td>
                    <td><span class="status ${statusClass}">${statusText}</span></td>
                    <td>${actionButtons}</td>
                `;
                container.appendChild(row);
            });
            
            if (history.length === 0) {
                container.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 2rem; color: var(--gray);">
                            <i class="fas fa-history" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                            <p>Belum ada transaksi</p>
                        </td>
                    </tr>
                `;
            }
        }

        // ==================== INISIALISASI APLIKASI ====================
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
        });

        // ==================== FUNGSI UNTUK DEVELOPER ====================
        // Contoh fungsi yang bisa dipanggil developer untuk mengubah ikon
        window.developerTools = {
            setIconType: setGlobalIconType,
            changeFolderIcon: changeFolderIcon,
            changeSubfolderIcon: changeSubfolderIcon,
            updateIconConfig: updateIconConfig,
            
            // Contoh penggunaan:
            setAllIconsToFontAwesome: function() {
                this.setIconType('fontawesome');
            },
            
            setAllIconsToEmoji: function() {
                this.setIconType('emoji');
            },
            
            // Contoh mengubah ikon folder game
            changeGameFolderIcon: function(newIcon) {
                this.changeFolderIcon('game', newIcon);
            },
            
            // Contoh mengubah ikon subfolder mobile_legends
            changeMLIcon: function(newIcon) {
                this.changeSubfolderIcon('mobile_legends', newIcon);
            }
        };
    </script>
</body>
</html>
